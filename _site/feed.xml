<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>ç‹å‡¯ç”·</title>
    <description></description>
    <link>http://localhost:4000/</link>
    <atom:link href="http://localhost:4000/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 13 Mar 2018 21:38:56 +0800</pubDate>
    <lastBuildDate>Tue, 13 Mar 2018 21:38:56 +0800</lastBuildDate>
    <generator>Jekyll v3.6.2</generator>
    
      <item>
        <title>math</title>
        <description>&lt;p&gt;about math&lt;/p&gt;

&lt;p&gt;@wangkainan-X555LD:~/IdeaProjects/wangjn2.github.io$ bundle exec jekyll serve
Configuration file: /home/wangkainan/IdeaProjects/wangjn2.github.io/_config.yml
            Source: /home/wangkainan/IdeaProjects/wangjn2.github.io
       Destination: /home/wangkainan/IdeaProjects/wangjn2.github.io/_site
 Incremental build: disabled. Enable with â€“incremental
      Generatingâ€¦ 
                    done in 1.028 seconds.
 Auto-regeneration: enabled for â€˜/home/wangkainan/IdeaProjects/wangjn2.github.ioâ€™
    Server address: http://127.0.0.1:4000&lt;/p&gt;
</description>
        <pubDate>Tue, 13 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/math/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/math/</guid>
        
        <category>math</category>
        
        
      </item>
    
      <item>
        <title>è´­ä¹°GoDaddyåŸŸåè®¾ç½®GitHub Pages</title>
        <description>&lt;p&gt;Congrats, youâ€™ve finally created a personal website that you want your own custom domain name instead of using gh-pages to host it. The process of connecting your domain to your gh-pages is quite simple. However, choosing the perfect domain name is the tricky part. I was very tempted to buy a â€œ.ninjaâ€ extension, but ended up settling with an â€œ.io.â€ Additionally, I was stumped as to whether to go with a nickname or my full name. In the end, I chose, kirstenswanson.io.&lt;/p&gt;

&lt;p&gt;Github provides, some docs to wire up your domain with your gh-pages, but Iâ€™m going to cover the set up in 7 simple steps.&lt;/p&gt;

&lt;p&gt;First, the most difficult partâ€¦decide on a domain name and buy it on GoDaddy (fingers-crossed you get the domain name you want and someone else hasnâ€™t already taken it)
On the home page of your account the â€œMy Productsâ€ tab is selected on default, which makes it easy to click on the â€œManageâ€ button&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Scroll down to the bottom of the page and click the â€œManage DNSâ€ button&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Within the DNS management page you will need to make three changes&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;In the Type â€œAâ€ row update the IP address to: 192.30.252.153
(this will point your custom domain to GitHubâ€™s server)
In the CNAME row with Name â€œwwwâ€ input your gh-pages website (username.github.io)
At the bottom click the â€œADDâ€ button and make another Type â€œAâ€ row with a different IP address of: 192.30.252.154
(donâ€™t worry when you leave the page it will alphabetize the types)&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Go to your editor and in the repository of your website create a new file named â€œCNAMEâ€ in the root of your directory&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;In the â€œCNAMEâ€ file add your domain name purchased from GoDaddy&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Add, commit, and push your changes to Github&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;You can confirm that your DNS is set-up correctly by using the dig command in your terminal with your custom domain. You should see that your â€œAâ€ Types point to the IP addresses that you had specified in GoDaddyâ€™s DNS management page, in other words youâ€™re pointing your DNS to GitHubâ€™s server. Below is an example of the dig command:&lt;/p&gt;

&lt;p&gt;If youâ€™re encountering any problems, this GitHub Troubleshooting Custom Domains documentation is a good reference.&lt;/p&gt;

&lt;p&gt;And just like that, you now have your very own custom DNS! As a side note, it may take some time for your DNS configuration to update, but after that celebrate and share your website! ğŸ‰&lt;/p&gt;

</description>
        <pubDate>Mon, 12 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/godaddy_github_pages_dns/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/godaddy_github_pages_dns/</guid>
        
        <category>GoDaddy</category>
        
        <category>Github Pages</category>
        
        <category>DNS</category>
        
        
      </item>
    
      <item>
        <title>Hello World</title>
        <description>&lt;p&gt;è¿™å‡ å¤©æœ‰å…´è‡´ç ”ç©¶äº†ä¸€äº›ä¸œè¥¿æƒ³æ›´æ–°ä¸‹åšå®¢ï¼Œä½†å‘ç°Jekyllä¸èƒ½è¿è¡Œï¼ŒæŠŠè¿‡ç¨‹ä¸­è¸©åˆ°çš„ä¸€äº›å‘è®°å½•ä¸‹ï¼Œä»¥ä¾¿ä»–äººï¼š&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæç¤ºç‰ˆæœ¬é”™è¯¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;zsh: /usr/local/bin/jekyll: bad interpreter: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin: no such file or directory&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿è¡Œ &lt;strong&gt;ruby â€“version&lt;/strong&gt; æŸ¥çœ‹ç³»ç»Ÿrubyç‰ˆæœ¬å·²ç»å‡çº§åˆ°äº†2.3.3ï¼Œè¿è¡Œå‘½ä»¤æ›´æ–°jekyllå’Œbundlerï¼Œå› ä¸ºæ–°ç‰ˆmacOS &lt;em&gt;/usr/bin&lt;/em&gt;ä¸èƒ½å†™ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå®‰è£…åˆ°&lt;em&gt;/usr/local/bin&lt;/em&gt;ç›®å½•&lt;/p&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;gem install &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; /usr/local/bin jekyll bundler
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

</description>
        <pubDate>Mon, 12 Mar 2018 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2018/03/hello_world/</link>
        <guid isPermaLink="true">http://localhost:4000/2018/03/hello_world/</guid>
        
        <category>Jekyll</category>
        
        <category>æ•™ç¨‹</category>
        
        
      </item>
    
      <item>
        <title>è§£å†³å› macOS High Sierraæ›´æ–°Rubyåˆ°2.3é€ æˆçš„Jekyllä¸èƒ½å¯åŠ¨çš„é—®é¢˜</title>
        <description>&lt;p&gt;è¿™å‡ å¤©æœ‰å…´è‡´ç ”ç©¶äº†ä¸€äº›ä¸œè¥¿æƒ³æ›´æ–°ä¸‹åšå®¢ï¼Œä½†å‘ç°Jekyllä¸èƒ½è¿è¡Œï¼ŒæŠŠè¿‡ç¨‹ä¸­è¸©åˆ°çš„ä¸€äº›å‘è®°å½•ä¸‹ï¼Œä»¥ä¾¿ä»–äººï¼š&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæç¤ºç‰ˆæœ¬é”™è¯¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;zsh: /usr/local/bin/jekyll: bad interpreter: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin: no such file or directory&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿è¡Œ &lt;strong&gt;ruby â€“version&lt;/strong&gt; æŸ¥çœ‹ç³»ç»Ÿrubyç‰ˆæœ¬å·²ç»å‡çº§åˆ°äº†2.3.3ï¼Œè¿è¡Œå‘½ä»¤æ›´æ–°jekyllå’Œbundlerï¼Œå› ä¸ºæ–°ç‰ˆmacOS &lt;em&gt;/usr/bin&lt;/em&gt;ä¸èƒ½å†™ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå®‰è£…åˆ°&lt;em&gt;/usr/local/bin&lt;/em&gt;ç›®å½•&lt;/p&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;gem install &lt;span class=&quot;nt&quot;&gt;-n&lt;/span&gt; /usr/local/bin jekyll bundler
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;å‡çº§åï¼Œè¿è¡Œ&lt;strong&gt;jekyll serve&lt;/strong&gt;ï¼Œåˆæç¤ºé”™è¯¯:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;/Library/Ruby/Site/2.3.0/bundler/spec_set.rb:88:in `block in materializeâ€™: Could not find public_suffix-2.0.4 &amp;gt; in any of the sources (Bundler::GemNotFound)&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler/spec_set.rb:82:in `map!â€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler/spec_set.rb:82:in `materializeâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler/definition.rb:170:in `specsâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler/definition.rb:237:in `specs_forâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler/definition.rb:226:in `requested_specsâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler/runtime.rb:108:in `block in definition_methodâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler/runtime.rb:20:in `setupâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Site/2.3.0/bundler.rb:107:in `setupâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Gems/2.3.0/gems/jekyll-3.6.2/lib/jekyll/plugin_manager.rb:50:in `require_from_bundlerâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /Library/Ruby/Gems/2.3.0/gems/jekyll-3.6.2/exe/jekyll:11:in `&amp;lt;top (required)&amp;gt;â€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /usr/local/bin/jekyll:23:in `loadâ€™&lt;br /&gt;
Â Â Â Â Â Â Â Â  from /usr/local/bin/jekyll:23:in `&amp;lt;main&amp;gt;â€™&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Googleäº†ä¸€ä¸‹æ²¡æ‰¾åˆ°ç­”æ¡ˆï¼Œçœ‹äº†ä¸‹ä»£ç ï¼Œè§‰å¾—åº”è¯¥æ˜¯_config.ymlç›¸å…³ä¾èµ–åº“æ²¡å‡çº§é€ æˆçš„é—®é¢˜ï¼Œè¿è¡Œå‘½ä»¤å‡çº§ä¾èµ–åº“ï¼š&lt;/p&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle update
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;å†æ¬¡è¿è¡Œï¼Œèƒ½å¯åŠ¨èµ·æ¥äº†ï¼Œä½†æœ‰ä¸ªè­¦å‘Šï¼š&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Deprecation: The â€˜gemsâ€™ configuration option has been renamed to â€˜pluginsâ€™. Please update your config file accordingly.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ‰“å¼€_config.ymlå°†gemsä¿®æ”¹ä¸ºpluginsï¼Œé—®é¢˜è§£å†³&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/2017/12/jekyll_problem_in_macos_high_sierra_10_13/&quot;&gt;åŸå§‹é“¾æ¥&lt;/a&gt; ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot;&gt;Creative Commons BY-NC-ND 4.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Thu, 28 Dec 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/12/jekyll_problem_in_macos_high_sierra_10_13/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/12/jekyll_problem_in_macos_high_sierra_10_13/</guid>
        
        <category>macOS</category>
        
        <category>Ruby</category>
        
        <category>Jekyll</category>
        
        <category>æ•™ç¨‹</category>
        
        
      </item>
    
      <item>
        <title>åˆ›å»ºmacOS High Sierraå®‰è£…ç›˜</title>
        <description>&lt;p&gt;ä»Šå¤©æ™šä¸Šæ­£å¥½æœ‰æ—¶é—´ï¼Œæƒ³æŠŠç³»ç»Ÿæ›´æ–°åˆ°macOS High Sierraï¼Œä»å•†åº—ä¸‹è½½å®Œæˆåï¼Œä¹ æƒ¯æ€§çš„åšä¸€ä¸ªå®‰è£…ç›˜å¤‡ç”¨ï¼Œå‚è€ƒä¹‹å‰çš„å‘½ä»¤è¡Œï¼Œä¿®æ”¹è¿è¡Œ:&lt;/p&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; /Applications/Install&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;macOS&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;High&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Sierra.app/Contents/Resources/createinstallmedia &lt;span class=&quot;nt&quot;&gt;--volume&lt;/span&gt; /Volumes/I &lt;span class=&quot;nt&quot;&gt;--applicationpath&lt;/span&gt; /Applications/Install&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;macOS&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;High&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Sierra.app â€”nointeraction
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;æç¤ºï¼š/Applications/Install macOS High Sierra.app does not appear to be a valid OS installer application.&lt;/p&gt;

&lt;p&gt;Googleäº†ä¸€ä¸‹ï¼Œè¯´ä»€ä¹ˆçš„éƒ½æœ‰ï¼›
è¿˜æ˜¯å…ˆå‚è€ƒçŸ¥è¯†åº“æ–‡ç« : &lt;a href=&quot;https://support.apple.com/en-us/HT201372&quot; target=&quot;_blank&quot;&gt;Create a bootable installer for macOS&lt;/a&gt;ï¼Œå‘ç°High Sierraä¸ç”¨åŠ â€“applicationpathå‚æ•°ï¼Œåˆ é™¤åè¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; /Applications/Install&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;macOS&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;High&lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;Sierra.app/Contents/Resources/createinstallmedia &lt;span class=&quot;nt&quot;&gt;--volume&lt;/span&gt; /Volumes/I â€”nointeraction
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¿˜æ˜¯ä¸€æ ·çš„é—®é¢˜&lt;/p&gt;

&lt;p&gt;æœ€ååœ¨äº¤æµåŒºå‘ç°&lt;a href=&quot;https://origin-discussions2-us-dr.apple.com/thread/8085073&quot;&gt;Install macOS High Sierra.app does not appear to be a valid OS installer application&lt;/a&gt;ï¼Œåˆæ˜¯æ–‡ä»¶ä¸‹è½½é”™è¯¯é—®é¢˜ï¼Œéœ€è¦ä¿è¯å®‰è£…æ–‡ä»¶å¤§å°ä¸ºï¼š&lt;strong&gt;&lt;em&gt;5.18G&lt;/em&gt;&lt;/strong&gt;ï¼Œé‡å¤å¤šæ¬¡ä¸‹è½½åç»ˆäºä¸‹åˆ°è¯¥å¤§å°çš„å®‰è£…åŒ…ï¼Œè¿è¡Œå‘½ä»¤ï¼Œé—®é¢˜è§£å†³ï¼&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä¹‹å‰æ²¡åšä¸ªå®‰è£…ç›˜ï¼Œè¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;ä»å•†åº—ä¸‹è½½&lt;/li&gt;
    &lt;li&gt;å¦‚æœå®‰è£…å™¨è¿è¡Œï¼Œè®°å¾—é€€å‡ºå®‰è£…&lt;/li&gt;
    &lt;li&gt;æ’å…¥Uç›˜æˆ–è€…ç§»åŠ¨ç¡¬ç›˜(è¯·è®°å¾—åˆ†åŒº)ï¼Œå®‰è£…åˆ†åŒºéœ€è¦è‡³å°‘æœ‰12Gç©ºé—´ï¼Œæˆ‘ä¸€èˆ¬é¢„ç•™16Gï¼Œä½¿ç”¨ç£ç›˜å·¥å…·æ ¼å¼åŒ–ä¸º:MacOSæ‰©å±•(æ—¥å¿—å¼)æ ¼å¼&lt;/li&gt;
    &lt;li&gt;è¿è¡Œä¸Šé¢çš„å‘½ä»¤(ä¸Šé¢ä¸¤ä¸ªå‘½ä»¤éƒ½å¯ä»¥ï¼Œéœ€è¦æ³¨æ„å°†â€“volumeåçš„å‚æ•°æ”¹ä¸ºä½ è‡ªå·±åœ¨3.ä¸­æ ¼å¼åŒ–çš„ç›˜ç¬¦åï¼ŒæŒ‡å®šé”™è¯¯æ¯æ•°æ®ï¼Œè°¨æ…æ“ä½œ)&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/2017/09/create_a_bootable_installer_for_macos/&quot;&gt;åŸå§‹é“¾æ¥&lt;/a&gt; ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot;&gt;Creative Commons BY-NC-ND 4.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Fri, 29 Sep 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/09/create_a_bootable_installer_for_macos/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/09/create_a_bootable_installer_for_macos/</guid>
        
        <category>macOS</category>
        
        <category>æ•™ç¨‹</category>
        
        
      </item>
    
      <item>
        <title>åœ¨macOSä¸‹åŠ¨æ€é€‰æ‹©ä½¿ç”¨Boostçš„é™æ€åº“å’ŒåŠ¨æ€åº“ç‰ˆæœ¬</title>
        <description>&lt;p&gt;åœ¨macOSä¸Šä½¿ç”¨&lt;a href=&quot;http://www.boost.org&quot; target=&quot;_blank&quot;&gt;Boost&lt;/a&gt;ï¼Œé™æ€åº“å’ŒåŠ¨æ€åº“ç‰ˆæœ¬éƒ½å­˜åœ¨çš„å‰æä¸‹ï¼Œå¦‚ä½•åŠ¨æ€é€‰æ‹©ä½¿ç”¨ä»€ä¹ˆç‰ˆæœ¬?&lt;/p&gt;

&lt;h3 id=&quot;é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ&quot;&gt;é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆæŒ‰ç…§ç»éªŒä½¿ç”¨ä½¿ç”¨-staticé€‰æ‹©é™æ€åº“ç‰ˆæœ¬ï¼Œç¼–è¯‘çš„æ—¶å€™æç¤ºcrt0.oæ‰¾ä¸åˆ°ï¼ŒåŸæ¥æ˜¯macOSå¯¹äºBinaryä¸æ”¯æŒ-staticï¼Œå…·ä½“å‚è€ƒ&lt;a href=&quot;https://developer.apple.com/library/content/qa/qa1118/_index.html&quot; target=&quot;_blank&quot;&gt;Technical Q&amp;amp;A QA1118: Statically linked binaries on Mac OS X&lt;/a&gt;ï¼›ç„¶åå‚è€ƒ&lt;a href=&quot;https://developer.apple.com/library/content/qa/qa1393/_index.html&quot; target=&quot;_blank&quot;&gt;Technical Q&amp;amp;A QA1393 Using static versions of existing dynamic libraries&lt;/a&gt;è¿™ç¯‡æ–‡ç« ï¼Œå°†é™æ€åº“å’ŒåŠ¨æ€åº“ææˆä¸¤ä¸ªæ–‡ä»¶å¤¹çš„æ–¹å¼ï¼Œæ€»è§‰å¾—å¾ˆåˆ«æ‰­ï¼›æœ€åè€ƒè™‘äº†ä¸€ä¸‹ï¼Œè§‰å¾—é‡‡ç”¨é“¾æ¥æ–‡ä»¶é‡å‘½åçš„æ–¹å¼æ›´ä¼˜é›…ä¸€äº›: æ¯”å¦‚è¯´boost_systemæ¨¡å—ï¼Œé™æ€åº“å’ŒåŠ¨æ€åº“ç‰ˆæœ¬åˆ†åˆ«ä¸º:libboost_system.a libboost_system.dylibï¼Œä¸è¦ç›´æ¥å°†ä»–ä»¬installåˆ°/usr/local/libç›®å½•ï¼Œæ”¾åœ¨å…¶ä»–ä»»æ„åœ°æ–¹ï¼Œç„¶ååœ¨/usr/local/libç›®å½•ä¸‹åˆ›å»ºå¯¹åº”çš„é“¾æ¥æ–‡ä»¶ï¼Œå¹¶å‘½åä¸ºï¼šlibboost_system.a libboost_system-d.dylib; ä½¿ç”¨æ—¶å€™é‡‡ç”¨-lboost_systemå’Œ-lboost_system-dæ¥é€‰æ‹©å¯¹åº”ç‰ˆæœ¬; æ­¤å¤–æˆ‘åªéœ€è¦å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œé“¾æ¥çš„æ—¶å€™ä¸ºäº†è„šæœ¬å…¼å®¹ï¼Œéœ€è¦å°†æ–‡ä»¶åçš„mtå»æ‰. ç»“åˆbrewå®ç°ä¸€ä¸ªè‡ªåŠ¨åŒ–è„šæœ¬å¦‚ä¸‹:&lt;/p&gt;

&lt;h3 id=&quot;è‡ªåŠ¨åŒ–è„šæœ¬&quot;&gt;è‡ªåŠ¨åŒ–è„šæœ¬&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/bin/sh&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# è‡ªåŠ¨å®‰è£…BOOSTåº“ï¼Œåªå®‰è£…å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œå°†åº“åæ”¹ä¸ºæ­£å¸¸æ–¹å¼(ä¸åŠ -mt)ï¼Œé»˜è®¤ä½¿ç”¨é™æ€åº“ç‰ˆæœ¬ï¼Œä½¿ç”¨åŠ¨æ€åº“ç‰ˆæœ¬-d&lt;/span&gt;

&lt;span class=&quot;nv&quot;&gt;_BOOST_LIB_DIR&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/local/lib

&lt;span class=&quot;c&quot;&gt;# clear&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#====================&lt;/span&gt;
brew uninstall boost boost-python boost-mpi
rm &lt;span class=&quot;nv&quot;&gt;$_BOOST_LIB_DIR&lt;/span&gt;/libboost&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# install&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#====================&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# boost å¦‚æœä½¿ç”¨é¢„ç¼–è¯‘åŒ…çš„è¯ï¼Œè¯¸å¦‚fiberç­‰æ²¡æœ‰&lt;/span&gt;
brew install boost &lt;span class=&quot;nt&quot;&gt;--c&lt;/span&gt;++11 &lt;span class=&quot;nt&quot;&gt;--with-icu4c&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--without-single&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# python mpi å¦‚æœæ·»åŠ --c++11é€‰é¡¹çš„è¯ï¼Œä¼šè¦æ±‚å…¨éƒ¨ç¼–è¯‘boostï¼Œè¿™é‡Œç›´æ¥å®‰è£…é¢„ç¼–è¯‘åŒ…&lt;/span&gt;
brew install boost-python
brew install boost-mpi

&lt;span class=&quot;c&quot;&gt;# rename linked file&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#====================&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;file &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_BOOST_LIB_DIR&lt;/span&gt;/libboost&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do
  if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!(&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;-mt&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'rm '&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt;
    rm &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;fi
done

for &lt;/span&gt;file &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;ls&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_BOOST_LIB_DIR&lt;/span&gt;/libboost&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;.&lt;span class=&quot;k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;do
  &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;_DEST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt; | sed &lt;span class=&quot;s1&quot;&gt;'s/-mt//'&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;##*.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'dylib'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then
    &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;_DEST&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_DEST&lt;/span&gt; | sed &lt;span class=&quot;s1&quot;&gt;'s/.dylib/-d.dylib/'&lt;/span&gt;&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;fi
  &lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'mv '&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_DEST&lt;/span&gt;
  mv &lt;span class=&quot;nv&quot;&gt;$file&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$_DEST&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;done&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h3&gt;

&lt;p&gt;å…³äº-staticé“¾æ¥ç”ŸæˆBinaryï¼ŒmacOSå…¶å®æ˜¯æ”¯æŒçš„ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ&lt;a href=&quot;https://oao.moe/archives/937/#fn:1&quot; target=&quot;_blank&quot;&gt;è¿™ç¯‡æ–‡ç« &lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/2017/09/use_boost_in_macos/&quot;&gt;åŸå§‹é“¾æ¥&lt;/a&gt; ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot;&gt;Creative Commons BY-NC-ND 4.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Sun, 24 Sep 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/09/use_boost_in_macos/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/09/use_boost_in_macos/</guid>
        
        <category>C++</category>
        
        <category>Boost</category>
        
        <category>macOS</category>
        
        
      </item>
    
      <item>
        <title>ç¨‹åºå‘˜å¦‚ä½•æ›´å¥½çš„è¡¨è¾¾è‡ªå·±çš„æƒ³æ³•- Graphviz:å…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·</title>
        <description>&lt;p&gt;ç”±äºå›¾ç¤ºåœ¨ç»†èŠ‚å’Œå®è§‚ä¸Šçš„è¡¨è¾¾æ›´ç›´è§‚ï¼Œå› æ­¤ç¨‹åºå‘˜ä¸ç®¡æ˜¯åœ¨å¼€å‘ä¹‹å‰åšåˆ†æè®ºè¯ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æ•´ç†æ€è·¯æˆ–è€…å¼€å‘åçš„æ€»ç»“æ±‡æŠ¥ï¼Œå¸¸å¸¸éƒ½éœ€è¦ä»¥è¿™ç§å½¢å¼æ¥å‘ˆç°ã€‚ä½œä¸ºå›¾ç¤ºä¸­æ¯”é‡æœ€å¤§çš„å…³ç³»å›¾ï¼Œä¸è®ºæ˜¯ç®€å•å¦‚Word, Pagesçš„è‡ªå¸¦å·¥å…·è¿˜æ˜¯è¯¸å¦‚Visio, OmniGraffleè¿™äº›ä¸“ä¸šè½¯ä»¶ï¼Œéƒ½å­˜åœ¨ç€æ“ä½œå’Œæ’ç‰ˆå¸ƒå±€çš„é—®é¢˜ï¼›æˆ‘ç»å¸¸åœ¨ä½¿ç”¨è¿™äº›è½¯ä»¶çš„è¿‡ç¨‹ä¸­è·‘åå»è°ƒæ•´å¸ƒå±€è€Œå½±å“äº†æ•´ä½“æ€è·¯çš„è¿è´¯æ€§ï¼Œå¤§å¤§é™ä½äº†å·¥ä½œæ•ˆç‡ã€‚è¿™é‡Œé¢çš„çŸ›ç›¾åœ¨äºç¨‹åºå‘˜æ›´å€¾å‘ç”¨å¹²æ‰°æ›´å°‘çš„æ–‡æœ¬è€Œä¸æ˜¯æ‰€è§å³æ‰€å¾—çš„å›¾å½¢åŒ–å·¥å…·æ¥è¡¨è¾¾è‡ªå·±çš„æ€æƒ³ï¼Œä»Šå¤©æˆ‘è¦ä»‹ç»çš„&lt;a href=&quot;http://www.graphviz.org&quot; target=&quot;_blank&quot;&gt;&lt;strong&gt;&lt;em&gt;Graphviz&lt;/em&gt;&lt;/strong&gt;&lt;/a&gt; å°±æ˜¯AT&amp;amp;T Labs Researchå¼€å‘çš„å…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&lt;/p&gt;

&lt;h3 id=&quot;åºè¨€&quot;&gt;åºè¨€&lt;/h3&gt;

&lt;p&gt;è®©æˆ‘ä»¬ä»¥Graphvizä½¿ç”¨çš„ä¸€èˆ¬æµç¨‹ä½œä¸ºä¾‹å­å¼€å§‹å§ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;å°†ä»¥ä¸Šæ–‡æœ¬ä¿å­˜ä¸ºsample.dotæ–‡ä»¶(ä»¥UTF-8æ ¼å¼å‚¨å­˜)ï¼Œå¦‚æœå·²ç»å®‰è£…é…ç½®å¥½äº†Graphvizï¼Œåœ¨è¯¥æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹è¿è¡Œå‘½ä»¤ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dot sample.dot &lt;span class=&quot;nt&quot;&gt;-Tpng&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; sample.png
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;å³å¯åœ¨è¯¥ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªPNGæ–‡ä»¶ï¼Œè™½ç„¶è¿™ä¸ªPNGæ–‡ä»¶ä¸€ç‰‡ç©ºç™½ï¼Œä»€ä¹ˆå†…å®¹éƒ½æ²¡æœ‰ï¼Œä½†è¿™å°±æ˜¯Graphvizä½¿ç”¨çš„ä¸€èˆ¬æµç¨‹ï¼Œå®šä¹‰ä¸€ä¸ªDOTæ–‡ä»¶ï¼Œç„¶åç”¨å‘½ä»¤è¾“å‡ºä½ æƒ³è¦çš„å¯è§†æ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•? Graphvizæœ¬è´¨æ˜¯ä¸€ä¸ªå¸ƒå±€å¼•æ“ï¼Œé‡Œé¢æœ‰å¤šç§å¸ƒå±€æ–¹å¼å¯ä¾›é€‰æ‹©ï¼ŒDOTæ˜¯ä¸€ç§æè¿°è¯­è¨€ï¼›è¿™ç±»ä¼¼äºæµè§ˆå™¨å’ŒHTMLçš„å…³ç³»ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å‡†å¤‡&quot;&gt;å‡†å¤‡&lt;/h3&gt;

&lt;h5 id=&quot;é¦–å…ˆè¿›å…¥graphvizä¸‹è½½é¡µé¢æ‰¾åˆ°è‡ªå·±å¹³å°çš„è½¯ä»¶ä¸‹è½½å®‰è£…å³å¯macoså¯ä»¥é€šè¿‡brewè¿›è¡Œå®‰è£…&quot;&gt;é¦–å…ˆè¿›å…¥&lt;a href=&quot;http://www.graphviz.org/Download..php&quot; target=&quot;_blank&quot;&gt;Graphvizä¸‹è½½é¡µé¢&lt;/a&gt;ï¼Œæ‰¾åˆ°è‡ªå·±å¹³å°çš„è½¯ä»¶ä¸‹è½½å®‰è£…å³å¯ï¼ŒmacOSå¯ä»¥é€šè¿‡brewè¿›è¡Œå®‰è£…&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install graphviz
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;* Windowså¹³å°å®‰è£…åï¼Œéœ€è¦æ‰‹åŠ¨å°†å®‰è£…è·¯å¾„é…ç½®åˆ°$PATHä¸­&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;h5 id=&quot;graphvizçš„å¸ƒå±€å¼•æ“ç°é˜¶æ®µæ”¯æŒä»¥ä¸‹æ–¹å¼&quot;&gt;Graphvizçš„å¸ƒå±€å¼•æ“ç°é˜¶æ®µæ”¯æŒä»¥ä¸‹æ–¹å¼ï¼š&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;dot è¿™æ˜¯æœ‰å‘å›¾çš„é»˜è®¤å¸ƒå±€æ–¹å¼ï¼Œé‡‡ç”¨æ°´å¹³æˆ–å‚ç›´çš„æ–¹å¼è¿›è¡Œå¸ƒå±€&lt;/li&gt;
    &lt;li&gt;twopi æ‰‡å½¢å¸ƒå±€ï¼Œé‡‡ç”¨Radial Layoutç®—æ³•ï¼Œé¦–å…ˆç¡®å®šä¸€ä¸ªNodeä¸ºä¸­å¿ƒç‚¹ï¼Œç„¶åè€ƒè™‘å…¶ä»–èŠ‚ç‚¹å’Œè¿™ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„è·ç¦»ä½œä¸ºåŠå¾„ï¼Œæœ€ç»ˆèŠ‚ç‚¹åˆ†æ•£åœ¨ä¸åŒåŠå¾„çš„åœ†å¼§ä¸Š&lt;/li&gt;
    &lt;li&gt;circo åœ†å½¢å¸ƒå±€ï¼Œé‡‡ç”¨Circular Layoutç®—æ³•ï¼Œå’Œtwopiç±»ä¼¼ï¼Œä½†æ˜¯å…¶å¿½ç•¥è·ç¦»å› ç´ ï¼Œå°†èŠ‚ç‚¹å‡åŒ€åˆ†å¸ƒåœ¨åŒä¸€ä¸ªåœ†ä¸Š&lt;/li&gt;
    &lt;li&gt;nearto ä¸€ç§å¾ˆç´§å‡‘çš„å¸ƒå±€ï¼Œå¤§å‹å›¾å½¢(è¶…è¿‡100ä¸ªèŠ‚ç‚¹)çš„é»˜è®¤å¸ƒå±€æ–¹å¼ï¼Œé‡‡ç”¨Spring Algorithmsç®—æ³•ï¼Œæœ¬è´¨å°±æ˜¯ç”¨èƒ¡å…‹å®šå¾‹å’Œåº“ä»‘å®šå¾‹ï¼Œé€šè¿‡èŠ‚ç‚¹ä¹‹é—´çš„æ’æ–¥å’Œå¸å¼•åŠ›å¤šæ¬¡è¿­ä»£åå½¢æˆçš„å›¾å½¢&lt;/li&gt;
    &lt;li&gt;fdp &amp;amp; sfdp å’Œä¸Šè¿°çš„neartoç±»ä¼¼ï¼Œä½†neartoè¿½æ±‚çš„æ˜¯æ•´ä½“çš„è¿­ä»£å¹³è¡¡ï¼Œä½†fdpè¿½æ±‚çš„æ˜¯ç»„å’Œç»„çš„å¹³è¡¡; sfdpæ˜¯fdpçš„å¹¶è¡Œç‰ˆæœ¬&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;graphvizå¯ä»¥è¾“å‡ºå¤šç§æ ¼å¼æˆ‘ç»å¸¸ä½¿ç”¨&quot;&gt;Graphvizå¯ä»¥è¾“å‡º&lt;a href=&quot;http://www.graphviz.org/content/output-formats&quot; target=&quot;_blank&quot;&gt;å¤šç§æ ¼å¼&lt;/a&gt;ï¼Œæˆ‘ç»å¸¸ä½¿ç”¨ï¼š&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;png &lt;a href=&quot;http://baike.baidu.com/link?url=Oz7UcuQ-O5GUtN6hsn_PtceTFA5KLkcY-4zrak7CLObQtgrFukdH2GcGjs5x2vSZN3BVdn12EksaB4HbGA_XUK&quot; target=&quot;_blank&quot;&gt;ç™¾åº¦ç™¾ç§‘ - PNG&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;svg &lt;a href=&quot;http://baike.baidu.com/link?url=yaiTXSdDbHRY5BOXjqXwf_NBQIYAtqxaGM_fz0XRH32lIE7KjDRE3P9FQBtwkJJVv08svUnH1lE4wnxUeGkbt_&quot; target=&quot;_blank&quot;&gt;ç™¾åº¦ç™¾ç§‘ - SVG&lt;/a&gt;&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;graphvizçš„å‘½ä»¤æ‰§è¡Œæ–¹å¼æœ‰ä¸¤ç§è¯¦æƒ…å¯å‚è€ƒgraphviz-command-line-invocation&quot;&gt;Graphvizçš„å‘½ä»¤æ‰§è¡Œæ–¹å¼æœ‰ä¸¤ç§ï¼Œè¯¦æƒ…å¯å‚è€ƒ&lt;a href=&quot;http://www.graphviz.org/content/command-line-invocation&quot; target=&quot;_blank&quot;&gt;Graphviz Command-line Invocation&lt;/a&gt;ï¼š&lt;/h5&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;å¸ƒå±€å DOTè¾“å…¥æ–‡ä»¶ -T{è¾“å‡ºæ ¼å¼} -o è¾“å‡ºæ–‡ä»¶ï¼Œå¦‚ï¼š&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;circo 1.dot &lt;span class=&quot;nt&quot;&gt;-Tsvg&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; 1.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;      &lt;/div&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;dot DOTè¾“å…¥æ–‡ä»¶ -K{å¸ƒå±€å} -T{è¾“å‡ºæ ¼å¼} -o è¾“å‡ºæ–‡ä»¶ï¼Œå¦‚ï¼š&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dot 1.dot &lt;span class=&quot;nt&quot;&gt;-Kcirco&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Tsvg&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; 1.svg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;      &lt;/div&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h5 id=&quot;æœ¬ç« çš„æœ€åæˆ‘ä»¬åŸºäº-visual-studio-code-æ¥æ‰“é€ ä¸€ä¸ªç®€å•çš„dotè¯­è¨€ç¼–è¾‘ç¯å¢ƒ&quot;&gt;æœ¬ç« çš„æœ€åï¼Œæˆ‘ä»¬åŸºäº &lt;strong&gt;&lt;em&gt;Visual Studio Code&lt;/em&gt;&lt;/strong&gt; æ¥æ‰“é€ ä¸€ä¸ªç®€å•çš„DOTè¯­è¨€ç¼–è¾‘ç¯å¢ƒ&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;ç”±äºVisual Studio Code | Marketplaceå…³äºGraphvizåªæœ‰ä¸€ä¸ªDOTè¯­è¨€çš„è¯­æ³•é«˜äº®æ’ä»¶&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=Stephanvs.dot&quot; target=&quot;_blank&quot;&gt;vscode-graphviz&lt;/a&gt;å­˜åœ¨ï¼›ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæˆ‘ä»¬è‡³å°‘éœ€è¦ä¸€ä¸ªé¢„è§ˆåŠŸèƒ½ï¼Œè®©æˆ‘ä»¬åŸºäº&lt;a href=&quot;https://code.visualstudio.com/docs/editor/tasks&quot; target=&quot;_blank&quot;&gt;Integrate with External Tools via Tasks&lt;/a&gt;æ¥æ‰“é€ ä¸€ä¸ªå§ï¼Œå¦‚æœåé¢åé¦ˆè¾ƒå¥½ï¼Œå¹¶ä¸”æˆ‘æœ‰æ—¶é—´ï¼Œæˆ‘å¯ä»¥åšä¸€ä¸ªDOTçš„ç»Ÿä¸€è§£å†³æ–¹æ¡ˆæ’ä»¶(é¢œè‰²é«˜äº®ï¼Œè¯­æ³•æç¤ºï¼Œé¢„è§ˆï¼Œè¾“å‡º)ï¼š&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;é¦–å…ˆåšä¸€ä¸ªPythonè„šæœ¬(ç”ŸæˆPNGæ–‡ä»¶å¹¶ä¸”é€šè¿‡Visual Studio Codeæ‰“å¼€)ï¼Œå¹¶å°†æ–‡ä»¶å­˜ä¸º &lt;strong&gt;&lt;em&gt;.vscode/make.py&lt;/em&gt;&lt;/strong&gt; æ–‡ä»¶ï¼š&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#!/usr/bin/env python&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;subprocess&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;sys&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;filepath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;shotname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;splitext&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;filename&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'.dot'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;outpath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;filepath&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'/'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;shotname&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'_'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'.png'&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subprocess&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'dot'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'-K'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'-Tpng'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'-o'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;subprocess&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'open'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'-a'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'/Applications/Microsoft Code.app'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;outpath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Error input file: '&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sys&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;argv&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;      &lt;/div&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;é€šè¿‡ &lt;strong&gt;Tasks:Configure Task Runner&lt;/strong&gt; å‘½ä»¤ç”Ÿæˆä¸€ä¸ªä»»åŠ¡é…ç½®æ–‡ä»¶ &lt;strong&gt;&lt;em&gt;.vscode/tasks.json&lt;/em&gt;&lt;/strong&gt;ï¼Œå¹¶å°†æ–‡ä»¶å†…å®¹æ›¿æ¢ä¸ºï¼š&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;command&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;python&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;isShellCommand&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;showOutput&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;never&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;echoCommand&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;suppressTaskName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;tasks&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;é»˜è®¤å¸ƒå±€ï¼Œä¸»è¦ç”¨äºæœ‰å‘å›¾&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;taskName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dot&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${workspaceRoot}/.vscode/make.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;dot&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${file}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;åŸºäºspring-model(åˆç§°force-based)ç®—æ³•&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;taskName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;neato&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${workspaceRoot}/.vscode/make.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;neato&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${file}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;  &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;å¾„å‘å¸ƒå±€&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;taskName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;twopi&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${workspaceRoot}/.vscode/make.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;twopi&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${file}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;åœ†ç¯å¸ƒå±€&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;taskName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;circo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${workspaceRoot}/.vscode/make.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;circo&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${file}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;ç”¨äºæ— å‘å›¾&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;taskName&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fdp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${workspaceRoot}/.vscode/make.py&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;fdp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;${file}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;      &lt;/div&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¹‹åå¯¹ä»»ä½•.dotæ–‡ä»¶ï¼ŒCommand(Ctrl) + Pï¼Œæ‰§è¡Œtask {å¸ƒå±€}ï¼Œå¦‚ï¼štask dotå‘½ä»¤ï¼Œå³å¯åœ¨åŒç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªPNGæ–‡ä»¶ï¼Œå¹¶é€šè¿‡Visual Studio Codeæ‰“å¼€ä¸€ä¸ªæ ‡ç­¾æ è¿›è¡Œé¢„è§ˆ&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;dotè„šæœ¬è¯­è¨€&quot;&gt;DOTè„šæœ¬è¯­è¨€&lt;/h3&gt;

&lt;h5 id=&quot;é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹dotè„šæœ¬è¯­è¨€çš„åŸºæœ¬ç‰¹ç‚¹&quot;&gt;é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹DOTè„šæœ¬è¯­è¨€çš„åŸºæœ¬ç‰¹ç‚¹&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;DOTä¸‰è¦ç´ ï¼šå›¾(digraph, graph)ï¼ŒèŠ‚ç‚¹(node)ï¼Œè¾¹(edge)&lt;/li&gt;
    &lt;li&gt;æ³¨é‡Šé£æ ¼é‡‡ç”¨C/C++çš„æ–¹å¼ï¼Œå³ &lt;strong&gt;&lt;em&gt;//&lt;/em&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;em&gt;/* */&lt;/em&gt;&lt;/strong&gt;ï¼Œä¹Ÿæ”¯æŒ#è¿›è¡Œè¯´æ˜&lt;/li&gt;
    &lt;li&gt;è¯­å¥é£æ ¼ç±»ä¼¼äºPythonæ–¹å¼ï¼Œå³ä¸€è¡Œå¤šè¯­å¥ç”¨ &lt;strong&gt;&lt;em&gt;;&lt;/em&gt;&lt;/strong&gt; åˆ†å‰²ï¼Œå•è¯­å¥æœ«å°¾ä¸éœ€è¦åŠ  &lt;strong&gt;&lt;em&gt;;&lt;/em&gt;&lt;/strong&gt; (åŠ ä¸Šä¹Ÿæ²¡é—®é¢˜)ï¼Œä½†æˆ‘æµ‹è¯•ç»“æœè¡¨æ˜ï¼Œå…¶å®ç”¨å…¶ä»–åˆ†éš”ç¬¦ï¼Œæ¯”å¦‚è¯´ç©ºæ ¼ä¹Ÿæ²¡é—®é¢˜&lt;/li&gt;
    &lt;li&gt;å¤šå±æ€§ä½¿ç”¨ &lt;strong&gt;&lt;em&gt;,&lt;/em&gt;&lt;/strong&gt; è¿›è¡Œåˆ†å‰²ï¼Œå¤šå±æ€§å€¼è®¾å®šæ—¶ï¼Œå¿…é¡»ä½¿ç”¨å¼•å·åŒ…èµ·æ¥ï¼Œå¦‚ï¼šstyle=â€striped, dashedâ€&lt;/li&gt;
    &lt;li&gt;å†…ç½®çš„é¢œè‰²ï¼Œæ ·å¼ï¼Œå½¢çŠ¶ç­‰å±æ€§å€¼å¯ä»¥ä¸ç”¨åŒå¼•å·åŒ…èµ·æ¥(ä¹Ÿå¯ä»¥åŒ…)ï¼Œå­—ç¬¦ä¸²ï¼Œ#ff0000æ ¼å¼çš„é¢œè‰²å¿…é¡»ä½¿ç”¨åŒå¼•å·åŒ…èµ·æ¥&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;å›¾&quot;&gt;å›¾&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;ä½¿ç”¨graphå®šä¹‰æ— å‘å›¾ï¼Œä½¿ç”¨digraphå®šä¹‰æœ‰å‘å›¾ï¼Œæ ¼å¼ä¸ºï¼š&lt;strong&gt;&lt;em&gt;digraph/graph id {â€¦}&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
    &lt;li&gt;å›¾çš„å±æ€§è®¾ç½®æ–¹å¼æœ‰ä¸¤ç§ï¼Œå…¶ä¸€æ˜¯ç›´æ¥åœ¨{}å†…åˆ—å‡ºï¼Œå¦‚ï¼šsize=â€4,4â€ï¼›å¦ä¸€ç§æ–¹å¼ä½¿ç”¨ï¼š&lt;strong&gt;&lt;em&gt;graph [å±æ€§åˆ—è¡¨]&lt;/em&gt;&lt;/strong&gt;(ä¸è®ºgraph,digraphè¿˜æ˜¯ä¸‹é¢å°†ä»‹ç»çš„å­å›¾subgraphéƒ½ä½¿ç”¨è¿™ä¸ªå…³é”®å­—æ¥å®šä¹‰å›¾çš„å±æ€§)&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘ä»¬å»¶ç»­ä¸Šé¢çš„ä¾‹å­ç»™ä»–åŠ ä¸Šä¸€ä¸ªè¯´æ˜å’Œä¸€äº›å±æ€§å¯¹ä½ç½®ã€å‘ˆç°åšä¸€äº›é™åˆ¶ï¼Œå‚è€ƒä¸Šé¢ç¬¬äºŒç‚¹ï¼Œä¸‹é¢3æ®µè„šæœ¬æœ€ç»ˆå‘ˆç°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œ&lt;strong&gt;&lt;em&gt;å› ä¸ªäººè§‰å¾—å±æ€§å’Œå†…å®¹åˆ†å¼€çš„æ–¹å¼è¡¨è¾¾æ›´ç›´è§‚ï¼Œæ‰€ä»¥æˆ‘ä¸€èˆ¬ä½¿ç”¨æœ€åä¸€ç§ä½œä¸ºå›¾å’Œå­å›¾çš„é»˜è®¤ç”¨æ³•ï¼Œä¸‹åŒ&lt;/em&gt;&lt;/strong&gt;ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
    bgcolor = &quot;#666666&quot;     // èƒŒæ™¯

    fontname=&quot;Futura&quot;       // å­—ä½“
    fontcolor = white       // å­—ä½“é¢œè‰²
    fontsize = 24           // å­—ä½“å¤§å°

    labelloc = t            // æ ‡ç­¾å‚ç›´é¡¶éƒ¨
    labeljust = c           // æ ‡ç­¾æ°´å¹³å±…ä¸­

    label = &quot;Graphviz\nå…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;
&lt;div style=&quot;height:2px&quot;&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
    graph [bgcolor = &quot;#666666&quot;,
    fontname=&quot;Futura&quot;, fontcolor = white, fontsize = 24,
    labelloc = t, labeljust = c,
    label = &quot;Graphviz\nå…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&quot;]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;
&lt;div style=&quot;height:2px&quot;&gt;&lt;/div&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
    graph [bgcolor = &quot;#666666&quot;,
    fontname=&quot;Futura&quot;, fontcolor = white, fontsize = 24,
    labelloc = t, labeljust = c]

    label = &quot;Graphviz\nå…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&quot;
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/01.svg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;èŠ‚ç‚¹&quot;&gt;èŠ‚ç‚¹&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;ä½¿ç”¨nodeæ¥å®šä¹‰èŠ‚ç‚¹ï¼Œæ ¼å¼ä¸ºï¼š&lt;strong&gt;&lt;em&gt;id [å±æ€§åˆ—è¡¨]&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
    &lt;li&gt;èŠ‚ç‚¹æ”¯æŒä¸å®šä¹‰ç›´æ¥ä½¿ç”¨ï¼Œæ— labelå±æ€§çš„èŠ‚ç‚¹ä½¿ç”¨å…¶idä½œä¸ºlabelï¼Œ&lt;strong&gt;æ”¯æŒä¸­æ–‡å&lt;/strong&gt;&lt;/li&gt;
    &lt;li&gt;å¯ä»¥ä½¿ç”¨ï¼š&lt;strong&gt;&lt;em&gt;node [å±æ€§åˆ—è¡¨]&lt;/em&gt;&lt;/strong&gt; æ¥å®šä¹‰é»˜è®¤å±æ€§ï¼Œæ–‡æ¡£é‡‡ç”¨è‡ªä¸Šè€Œä¸‹çš„æ–¹å¼è§£æï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥å¤šæ¬¡è¦†ç›–é»˜è®¤å±æ€§ï¼Œæœ‰æ•ˆèŒƒå›´åˆ°ä¸‹ä¸€æ¬¡å®šä¹‰ä¸ºæ­¢&lt;/li&gt;
    &lt;li&gt;èŠ‚ç‚¹idæ˜¯å…¨å±€æœ‰æ•ˆçš„ï¼Œå› æ­¤ä½ å¿…é¡»ä¿è¯èŠ‚ç‚¹idçš„å”¯ä¸€æ€§ï¼Œå¤šæ¬¡å®šä¹‰æ°¸è¿œåªæœ‰ä¸€ä¸ªæœ‰æ•ˆ&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;è¾¹&quot;&gt;è¾¹&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;æ— å‘å›¾graphçš„è¾¹ä½¿ç”¨ï¼š&lt;strong&gt;â€“&lt;/strong&gt;ï¼Œæœ‰å‘å›¾digraphçš„è¾¹ä½¿ç”¨ï¼š&lt;strong&gt;-&amp;gt;&lt;/strong&gt;ï¼Œè¿™æ˜¯ä¸¥æ ¼è¦æ±‚çš„ï¼Œç”¨é”™ä¸èƒ½æ­£å¸¸è§£æ&lt;/li&gt;
    &lt;li&gt;è¾¹çš„åé¢å¯ä»¥è·Ÿ[]æ¥å®šä¹‰è¾¹çš„å±æ€§&lt;/li&gt;
    &lt;li&gt;å¯ä»¥ä½¿ç”¨ï¼š&lt;strong&gt;&lt;em&gt;edge [å±æ€§åˆ—è¡¨]&lt;/em&gt;&lt;/strong&gt; æ¥å®šä¹‰é»˜è®¤å±æ€§ï¼Œå’ŒèŠ‚ç‚¹çš„é»˜è®¤å±æ€§ä¸€æ ·ï¼Œä½ å¯ä»¥å¤šæ¬¡è¦†ç›–&lt;/li&gt;
    &lt;li&gt;è¾¹è¿æ¥åˆ°èŠ‚ç‚¹çš„è¿æ¥ç‚¹ï¼Œéµå®ˆï¼šä¸ŠåŒ—ä¸‹å—ï¼Œå·¦è¥¿å³ä¸œçš„åŸåˆ™ï¼Œåˆ†åˆ«ä½¿ç”¨æ–¹ä½n(North), s(South), w(West), e(East)æ¥å®šä¹‰ï¼Œä¸€å…±æœ‰8ä¸ªè¿æ¥ç‚¹ï¼š{n, ne, e, se, s, sw, w, nw}ï¼Œé‡‡ç”¨ &lt;strong&gt;&lt;em&gt;{Node id}:æ–¹ä½&lt;/em&gt;&lt;/strong&gt; çš„å½¢å¼&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸Šé¢çš„ä¾‹å­ä¸­ä¸€ä¸ªèŠ‚ç‚¹éƒ½æ²¡æœ‰ï¼Œä¸å¯èƒ½æ„æˆä»»ä½•çš„å…³ç³»ï¼Œè®©æˆ‘ä»¬ç»“åˆä¸Šé¢çš„çŸ¥è¯†ç‚¹ï¼Œæ”¹å†™å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
    // å®šä¹‰å›¾å±æ€§
    graph [bgcolor = &quot;#666666&quot;,
    fontname=&quot;Futura&quot;, fontcolor = white, fontsize = 24,
    labelloc = t, labeljust = c]
    // å®šä¹‰å…±ç”¨èŠ‚ç‚¹å±æ€§
    node [shape=&quot;cds&quot;, color=&quot;#dddddd&quot;, penwidth=&quot;0.5&quot;,style=&quot;filled&quot;,
    fixedsize=true, width=3, height=0.5, fontname=&quot;Futura&quot;, fontsize=10]
    // å®šä¹‰å…¬ç”¨è¾¹å±æ€§
    edge [color=&quot;#cccccc&quot;, style=&quot;dashed&quot;, arrowhead=vee, arrowsize=0.75, penwidth=&quot;0.75&quot;]

    label = &quot;Graphviz\nå…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&quot;

    prepare [fillcolor=&quot;#dfc1c1&quot;, label=&quot;å‡†å¤‡&quot;]
    dot [fillcolor=&quot;#c1dfc1&quot;, label=&quot;DOTè¯­è¨€&quot;]
    tpi [fillcolor=&quot;#c1c1df&quot;, label=&quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;]

    // æ­¥éª¤
    prepare -&amp;gt; dot
    dot -&amp;gt; tpi
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/02.svg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;å­å›¾&quot;&gt;å­å›¾&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;å­å›¾ä½¿ç”¨subgraphå®šä¹‰ï¼Œå¿…é¡»ä»¥clusterä½œä¸ºå‰ç¼€ï¼Œæ ¼å¼ä¸º: &lt;strong&gt;&lt;em&gt;subgraph clusterXXX {â€¦}&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
    &lt;li&gt;æ— å‘å›¾çš„å­å›¾å¿…é¡»æ˜¯æ— å‘å›¾ï¼Œæœ‰å‘å›¾çš„å­å›¾å¿…é¡»æ˜¯æœ‰å‘å›¾ï¼Œä¸¥æ ¼éµå®ˆè¾¹çš„è¦æ±‚&lt;/li&gt;
    &lt;li&gt;å­å›¾ç»§æ‰¿çˆ¶å›¾çš„å±æ€§ï¼Œä½†å¯ä»¥å¯¹å…¶è¿›è¡Œé‡å®šä¹‰è¦†ç›–ï¼ŒèŒƒå›´ä»…é™äºè¯¥å­å›¾ï¼Œä¸ä¼šå¯¹çˆ¶å›¾æˆ–å…„å¼Ÿå›¾è¿›è¡Œæ±¡æŸ“&lt;/li&gt;
    &lt;li&gt;å­å›¾å¯ä»¥æ— é™åµŒå¥—ï¼Œå³å­å›¾å†…å¯ä»¥å†å®šä¹‰å­å›¾&lt;/li&gt;
    &lt;li&gt;Graphvizä¸­ï¼Œå…³ç³»åªå­˜åœ¨èŠ‚ç‚¹ä¹‹é—´ï¼Œä¸å­˜åœ¨èŠ‚ç‚¹ä¸å­å›¾ï¼Œå­å›¾å’Œå­å›¾çš„å…³ç³»ï¼›è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†ä¸Šå±‚çš„compoundè®¾ç½®ä¸ºtrueï¼Œç„¶åé€šè¿‡å°†è¾¹å±æ€§ä¸­çš„lheadå’Œltailè®¾å®šä¸ºç›¸åº”çš„å­å›¾æ¥å»ºç«‹&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘ä»¬ç»§ç»­å°†ä¸Šé¢æ¯ä¸€æ­¥çš„å­å›¾è¡¥å……å®Œæ•´ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
    // å®šä¹‰å›¾å±æ€§
    graph [bgcolor=&quot;#666666&quot;, style=&quot;rounded&quot;, color=&quot;#1c1c1c&quot;, penwidth=&quot;0.5&quot;,
    fontname=&quot;Futura&quot;, fontcolor=white, fontsize=24,
    labelloc=t, labeljust=c,
    compound=true]

    label = &quot;Graphviz\nå…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&quot;

    // å®šä¹‰å…±ç”¨èŠ‚ç‚¹å±æ€§
    node [shape=&quot;cds&quot;, color=&quot;#1c1c1c&quot;, penwidth=&quot;0.5&quot;, style=&quot;filled&quot;,
    fixedsize=true, width=3, height=0.5, fontname=&quot;Futura&quot;, fontsize=10]
    // å®šä¹‰å…¬ç”¨è¾¹å±æ€§
    edge [color=&quot;#cccccc&quot;, style=&quot;dashed&quot;, arrowhead=vee, arrowsize=0.75, penwidth=&quot;0.75&quot;]

    prepare [fillcolor=&quot;#dfc1c1&quot;, label=&quot;å‡†å¤‡&quot;]
    dot [fillcolor=&quot;#c1dfc1&quot;, label=&quot;DOTè¯­è¨€&quot;]
    tpi [fillcolor=&quot;#c1c1df&quot;, label=&quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;]

    // æ­¥éª¤
    prepare -&amp;gt; dot -&amp;gt; tpi

    node [shape=&quot;box&quot;, style=&quot;rounded,filled&quot;, color=&quot;#aaaaaa&quot;, width=2.75, height=0.4]
    edge [color=&quot;#222222&quot;, style=&quot;dotted&quot;]

    subgraph cluster_prepare {
        graph [bgcolor=&quot;#dfc1c1&quot;, fontsize=12, labelloc=b]

        label = &quot;å‡†å¤‡&quot;

        p_install [label=&quot;å®‰è£…&quot;]
        p_layout [label=&quot;å¸ƒå±€å¼•æ“&quot;]
        p_format [label=&quot;è¾“å‡ºæ ¼å¼&quot;]
        p_cmd [label=&quot;å‘½ä»¤è¿è¡Œæ–¹å¼&quot;]
        p_tools [label=&quot;å·¥å…·&quot;]

        p_install -&amp;gt; p_layout -&amp;gt; p_format -&amp;gt; p_cmd -&amp;gt; p_tools
    }
    subgraph cluster_dot {
        graph [bgcolor=&quot;#c1dfc1&quot;, fontsize=12, labelloc=b]

        label = &quot;DOTè¯­è¨€&quot;

        d_base [label=&quot;åŸºæœ¬è¯­æ³•&quot;]
        d_graph [label=&quot;å›¾&quot;]
        d_node [label=&quot;èŠ‚ç‚¹&quot;]
        d_edge [label=&quot;è¾¹&quot;]
        d_subgraph [label=&quot;å­å›¾&quot;]
        d_group [label=&quot;åˆ†ç»„ä¸å¸ƒå±€&quot;]
        d_table [label=&quot;è¡¨æ ¼&quot;]
        d_image [label=&quot;å›¾ç‰‡&quot;]
        d_strict [label=&quot;çº¦æŸæ¡ä»¶&quot;]

        d_base -&amp;gt; d_graph -&amp;gt; d_node -&amp;gt; d_edge -&amp;gt; d_subgraph -&amp;gt; d_group -&amp;gt; d_table -&amp;gt; d_image -&amp;gt; d_strict
    }
    subgraph cluster_tpi {
        graph [bgcolor=&quot;#c1c1df&quot;, fontsize=12, labelloc=b]
        edge [style=&quot;invis&quot;]

        label = &quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;

        t_c [label=&quot;C&quot;, color=&quot;#ff4444&quot;]
        t_python [label=&quot;Python&quot;]
        t_javascript [label=&quot;JavaScript&quot;]
        t_other [label=&quot;...&quot;]

        t_c -&amp;gt; t_python -&amp;gt; t_javascript -&amp;gt; t_other
    }

    edge [dir=none, color=&quot;#ffffff&quot;]
    prepare -&amp;gt; p_install [lhead=cluster_prepare]
    dot -&amp;gt; d_base [lhead=cluster_dot]
    tpi -&amp;gt; t_c [lhead=cluster_tpi]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/03.svg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;åˆ†ç»„ä¸å¸ƒå±€&quot;&gt;åˆ†ç»„ä¸å¸ƒå±€&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;Graphvizçš„å¸ƒå±€æ¨¡å¼æœ‰TB(ä»ä¸Šå€’ä¸‹),BT(ä»ä¸‹åˆ°ä¸Š),LR(ä»å·¦åˆ°å³),RL(ä»å³åˆ°å·¦)å››ç§æ¨¡å¼ï¼Œé»˜è®¤ä¸ºTBï¼Œé€šè¿‡rankdirè®¾ç½®&lt;/li&gt;
    &lt;li&gt;å¸ƒå±€æ¨¡å¼ä¹Ÿæ˜¯ä¸€ç§å›¾å±æ€§ï¼Œä¹Ÿèƒ½è¢«ç»§æ‰¿&lt;/li&gt;
    &lt;li&gt;åˆ†ç»„é€šè¿‡{}æ¥å¤„ç†ï¼Œç»„å†…å¦‚æœä¸è®¾å®šrankï¼Œå…¶æ„ä¹‰ä»…ä»…ç±»ä¼¼äºè„šæœ¬ä»£ç åˆ†å—ï¼Œé€šè¿‡rankè®¾å®šåï¼Œç»„å†…çš„æˆå‘˜æŒ‰ç…§è®¾å®šæ’åˆ—ï¼Œå¸¸ç”¨çš„æœ‰sameï¼Œè¡¨ç¤ºç»„å†…æˆå‘˜åœ¨åŒä¸€ç»´åº¦ä¸Šï¼Œæ¯”å¦‚è¯´é»˜è®¤ä»ä¸Šåˆ°ä¸‹çš„æ’åˆ—æ¨¡å¼ä¸‹ï¼Œç»„å†…æˆå‘˜åœ¨åŒä¸€æ°´å¹³ä½ç½®&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;åˆ©ç”¨åˆ†ç»„å’Œå¸ƒå±€å°†ä¸Šé¢çš„ä¾‹å­è°ƒæ•´ä¸€ä¸‹ï¼Œè®©æ’åˆ—æ›´æ•´é½ä¸€äº›ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
    // å®šä¹‰å›¾å±æ€§
    graph [bgcolor=&quot;#666666&quot;, style=&quot;rounded&quot;, color=&quot;#1c1c1c&quot;, penwidth=&quot;0.5&quot;,
    fontname=&quot;Futura&quot;, fontcolor=white, fontsize=24,
    labelloc=t, labeljust=c,
    compound=true]

    label = &quot;Graphviz\nå…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&quot;

    // å®šä¹‰å…±ç”¨èŠ‚ç‚¹å±æ€§
    node [shape=&quot;cds&quot;, color=&quot;#1c1c1c&quot;, penwidth=&quot;0.5&quot;, style=&quot;filled&quot;,
    fixedsize=true, width=3, height=0.5, fontname=&quot;Futura&quot;, fontsize=10]
    // å®šä¹‰å…¬ç”¨è¾¹å±æ€§
    edge [color=&quot;#cccccc&quot;, style=&quot;dashed&quot;, arrowhead=vee, arrowsize=0.75, penwidth=&quot;0.75&quot;]

    {
        rank = same
        prepare [fillcolor=&quot;#dfc1c1&quot;, label=&quot;å‡†å¤‡&quot;]
        dot [fillcolor=&quot;#c1dfc1&quot;, label=&quot;DOTè¯­è¨€&quot;]
        tpi [fillcolor=&quot;#c1c1df&quot;, label=&quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;]

        // æ­¥éª¤
        prepare -&amp;gt; dot -&amp;gt; tpi
    }

    node [shape=&quot;box&quot;, style=&quot;rounded,filled&quot;, color=&quot;#aaaaaa&quot;, width=2.75, height=0.4]
    edge [color=&quot;#222222&quot;, style=&quot;dotted&quot;]

    subgraph cluster_prepare {
        graph [bgcolor=&quot;#dfc1c1&quot;, fontsize=12, labelloc=b]

        label = &quot;å‡†å¤‡&quot;

        p_install [label=&quot;å®‰è£…&quot;]
        p_layout [label=&quot;å¸ƒå±€å¼•æ“&quot;]
        p_format [label=&quot;è¾“å‡ºæ ¼å¼&quot;]
        p_cmd [label=&quot;å‘½ä»¤è¿è¡Œæ–¹å¼&quot;]
        p_tools [label=&quot;å·¥å…·&quot;]

        p_install -&amp;gt; p_layout -&amp;gt; p_format -&amp;gt; p_cmd -&amp;gt; p_tools
    }
    subgraph cluster_dot {
        graph [bgcolor=&quot;#c1dfc1&quot;, fontsize=12, labelloc=b]

        label = &quot;DOTè¯­è¨€&quot;

        d_base [label=&quot;åŸºæœ¬è¯­æ³•&quot;]
        d_graph [label=&quot;å›¾&quot;]
        d_node [label=&quot;èŠ‚ç‚¹&quot;]
        d_edge [label=&quot;è¾¹&quot;]
        d_subgraph [label=&quot;å­å›¾&quot;]
        d_group [label=&quot;åˆ†ç»„ä¸å¸ƒå±€&quot;]
        d_table [label=&quot;è¡¨æ ¼&quot;]
        d_image [label=&quot;å›¾ç‰‡&quot;]
        d_strict [label=&quot;çº¦æŸæ¡ä»¶&quot;]

        d_base -&amp;gt; d_graph -&amp;gt; d_node -&amp;gt; d_edge -&amp;gt; d_subgraph -&amp;gt; d_group -&amp;gt; d_table -&amp;gt; d_image -&amp;gt; d_strict
    }
    subgraph cluster_tpi {
        graph [bgcolor=&quot;#c1c1df&quot;, fontsize=12, labelloc=b]
        edge [style=&quot;invis&quot;]

        label = &quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;

        t_c [label=&quot;C&quot;, color=&quot;#ff4444&quot;]
        t_python [label=&quot;Python&quot;]
        t_javascript [label=&quot;JavaScript&quot;]
        t_other [label=&quot;...&quot;]

        t_c -&amp;gt; t_python -&amp;gt; t_javascript -&amp;gt; t_other
    }

    edge [dir=none, color=&quot;#ffffff&quot;]
    prepare -&amp;gt; p_install [lhead=cluster_prepare]
    dot -&amp;gt; d_base [lhead=cluster_dot]
    tpi -&amp;gt; t_c [lhead=cluster_tpi]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/04.svg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;è¡¨æ ¼&quot;&gt;è¡¨æ ¼&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;Graphvizçš„è¡¨æ ¼ä¹Ÿæ˜¯ä¸€ç§èŠ‚ç‚¹ç±»å‹ï¼Œä½¿ç”¨labelæ ‡ç­¾æ¥æŒ‡å®šå†…å®¹å’Œæ ¼å¼&lt;/li&gt;
    &lt;li&gt;å†…ç½®å¸ƒå±€æ–¹å¼é€šè¿‡shapeä¸ºrecord(çŸ©å½¢æ¡†) &amp;amp; Mrecord(åœ†è§’çŸ©å½¢æ¡†)æ¥æŒ‡å®šï¼Œå¦‚æœå’Œå½“å‰æ–¹å‘ä¸€è‡´ä½¿ç”¨|æ¥éš”å¼€ï¼Œä½¿ç”¨{|}è¡¨ç¤ºå’Œå½“å‰æ–¹å‘ç›¸åï¼Œæ¯”å¦‚è¯´é»˜è®¤æ˜¯çºµå‘å¸ƒå±€æ–¹å¼ï¼Œé‚£|éš”å¼€çš„ä¹Ÿæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œ{|}åˆ™æ˜¯ä»å·¦åˆ°å³ï¼Œåªæ˜¯è¦æ³¨æ„ï¼Œå¦‚æœæ˜¯åœ¨ä¸€ä¸ª{|}å†…éƒ¨å†{|}ï¼Œåˆå˜æˆäº†ä»ä¸Šåˆ°ä¸‹(å¦‚æœåªæ˜¯æ–‡å­—æ¢è¡Œï¼Œå¯ä»¥åœ¨æ–‡å­—æœ«å°¾åŠ \n(å±…ä¸­å¯¹é½)\l(å·¦å¯¹é½)\r(å³å¯¹é½)è¿›è¡Œåˆ‡åˆ†)&lt;/li&gt;
    &lt;li&gt;å†…ç½®å¸ƒå±€æœ€å¤§çš„é—®é¢˜æ˜¯ä¸èƒ½åˆ†åˆ«è°ƒæ•´æ¯ä¸ªæ ¼å­é‡Œçš„é¢œè‰²å’Œå­—ä½“ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦æ›´ä¸°å¯Œçš„æ§åˆ¶å¯ä»¥é€šè¿‡ä½¿ç”¨HTMLè¡¨æ ¼æ ‡ç­¾ï¼Œè¿™ç§æ–¹å¼ä¸è¦æ±‚shapeä¸ºrecordæˆ–Mrecordæ ·å¼ï¼Œå¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ä½¿ç”¨&amp;lt;&amp;gt;è€Œä¸æ˜¯åŒå¼•å·æ¥å¼•ç”¨å†…å®¹&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;h5 id=&quot;å›¾ç‰‡&quot;&gt;å›¾ç‰‡&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;é€šè¿‡imageå±æ€§å¯ä»¥ç»™æŒ‡å®šèŠ‚ç‚¹åŠ ä¸Šå›¾ç‰‡èƒŒæ™¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸ºäº†é¿å…å¹²æ‰°éœ€è¦å°†shapeè®¾ä¸ºnoneå¹¶å°†labelç½®ç©ºï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡HTMLè¡¨æ ¼æ ‡ç­¾å†…éƒ¨åµŒå¥—IMAGEæ¥ä½¿ç”¨&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å°±åˆ©ç”¨è¿™ä¸¤èŠ‚çŸ¥è¯†ç‚¹æ¥åŠ ä¸Šç‰ˆæƒä¿¡æ¯å’Œè„šæ³¨ï¼Œå¹¶å½¢æˆæœ€ç»ˆå®šç¨¿ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph graphviz{
    // å®šä¹‰å›¾å±æ€§
    graph [bgcolor=&quot;#666666&quot;, style=&quot;rounded&quot;, color=&quot;#1c1c1c&quot;, penwidth=&quot;0.5&quot;,
    fontname=&quot;Futura&quot;, fontcolor=white, fontsize=24,
    labelloc=t, labeljust=c,
    compound=true]

    label = &quot;Graphviz\nå…³ç³»å›¾è„šæœ¬ç»˜åˆ¶å·¥å…·&quot;

    copyright [shape=plaintext, fontcolor=&quot;#2222ff&quot;, label=&amp;lt;
                &amp;lt;TABLE BORDER=&quot;0&quot;&amp;gt;
                &amp;lt;TR&amp;gt;&amp;lt;TD&amp;gt;&amp;lt;FONT FACE=&quot;Futura&quot; POINT-SIZE=&quot;16&quot;&amp;gt;å‘¨åˆš&amp;lt;/FONT&amp;gt;&amp;lt;/TD&amp;gt;&amp;lt;/TR&amp;gt;
                &amp;lt;TR&amp;gt;&amp;lt;TD&amp;gt;https://stidio.github.io/&amp;lt;/TD&amp;gt;&amp;lt;/TR&amp;gt;
                &amp;lt;/TABLE&amp;gt;
                &amp;gt;]

    // å®šä¹‰å…±ç”¨èŠ‚ç‚¹å±æ€§
    node [shape=&quot;cds&quot;, color=&quot;#1c1c1c&quot;, penwidth=&quot;0.5&quot;, style=&quot;filled&quot;,
    fixedsize=true, width=3, height=0.5, fontname=&quot;Futura&quot;, fontsize=10]
    // å®šä¹‰å…¬ç”¨è¾¹å±æ€§
    edge [color=&quot;#cccccc&quot;, style=&quot;dashed&quot;, arrowhead=vee, arrowsize=0.75, penwidth=&quot;0.75&quot;]

    {
        rank = same
        prepare [fillcolor=&quot;#dfc1c1&quot;, label=&quot;å‡†å¤‡&quot;]
        dot [fillcolor=&quot;#c1dfc1&quot;, label=&quot;DOTè¯­è¨€&quot;]
        tpi [fillcolor=&quot;#c1c1df&quot;, label=&quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;]

        // æ­¥éª¤
        prepare -&amp;gt; dot -&amp;gt; tpi
    }

    copyright -&amp;gt; dot [style=invis]

    node [shape=&quot;box&quot;, style=&quot;rounded,filled&quot;, color=&quot;#aaaaaa&quot;, width=2.75, height=0.4]
    edge [color=&quot;#222222&quot;, style=&quot;dotted&quot;]

    subgraph cluster_prepare {
        graph [bgcolor=&quot;#dfc1c1&quot;, fontsize=12, labelloc=b]

        label = &quot;å‡†å¤‡&quot;

        p_install [label=&quot;å®‰è£…&quot;]
        p_layout [label=&quot;å¸ƒå±€å¼•æ“&quot;]
        p_format [label=&quot;è¾“å‡ºæ ¼å¼&quot;]
        p_cmd [label=&quot;å‘½ä»¤è¿è¡Œæ–¹å¼&quot;]
        p_tools [label=&quot;å·¥å…·&quot;]

        p_install -&amp;gt; p_layout -&amp;gt; p_format -&amp;gt; p_cmd -&amp;gt; p_tools
    }
    subgraph cluster_dot {
        graph [bgcolor=&quot;#c1dfc1&quot;, fontsize=12, labelloc=b]

        label = &quot;DOTè¯­è¨€&quot;

        d_base [label=&quot;åŸºæœ¬è¯­æ³•&quot;]
        d_graph [label=&quot;å›¾&quot;]
        d_node [label=&quot;èŠ‚ç‚¹&quot;]
        d_edge [label=&quot;è¾¹&quot;]
        d_subgraph [label=&quot;å­å›¾&quot;]
        d_group [label=&quot;åˆ†ç»„ä¸å¸ƒå±€&quot;]
        d_table [label=&quot;è¡¨æ ¼&quot;]
        d_image [label=&quot;å›¾ç‰‡&quot;]
        d_strict [label=&quot;çº¦æŸæ¡ä»¶&quot;]

        d_base -&amp;gt; d_graph -&amp;gt; d_node -&amp;gt; d_edge -&amp;gt; d_subgraph -&amp;gt; d_group -&amp;gt; d_table -&amp;gt; d_image -&amp;gt; d_strict
    }
    subgraph cluster_tpi {
        graph [bgcolor=&quot;#c1c1df&quot;, fontsize=12, labelloc=b]
        edge [style=&quot;invis&quot;]

        label = &quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;

        t_c [label=&quot;C&quot;, color=&quot;#ff4444&quot;]
        t_python [label=&quot;Python&quot;]
        t_javascript [label=&quot;JavaScript&quot;]
        t_other [label=&quot;...&quot;]

        t_c -&amp;gt; t_python -&amp;gt; t_javascript -&amp;gt; t_other
    }

    edge [dir=none, color=&quot;#ffffff&quot;]
    prepare -&amp;gt; p_install [lhead=cluster_prepare]
    dot -&amp;gt; d_base [lhead=cluster_dot]
    tpi -&amp;gt; t_c [lhead=cluster_tpi]

    footer [fixedsize=true, width=8, height=0.8,
    shape=plaintext, style=&quot;&quot;,
    fontcolor=white, fontsize=8,
    label=&amp;lt;
        &amp;lt;TABLE BORDER=&quot;0&quot;&amp;gt;
            &amp;lt;TR&amp;gt;&amp;lt;TD&amp;gt;&amp;lt;IMG SRC=&quot;CC-BY-SA_icon.png&quot;/&amp;gt;&amp;lt;/TD&amp;gt;&amp;lt;/TR&amp;gt;
            &amp;lt;TR&amp;gt;&amp;lt;TD&amp;gt;This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.&amp;lt;/TD&amp;gt;&amp;lt;/TR&amp;gt;
        &amp;lt;/TABLE&amp;gt;
        &amp;gt;]

    d_strict -&amp;gt; footer [style=invis]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/05.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h5 id=&quot;çº¦æŸæ¡ä»¶&quot;&gt;çº¦æŸæ¡ä»¶&lt;/h5&gt;

&lt;blockquote&gt;
  &lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´ä½ å¯ä»¥å»ºç«‹å¤šä¸ªç›¸åŒçš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æœ‰å¤šæ¡è¾¹ç›¸è¿ï¼Œå¦‚æœåœ¨graphæˆ–digraphå‰åŠ ä¸Š &lt;strong&gt;&lt;em&gt;strict&lt;/em&gt;&lt;/strong&gt; å…³é”®å­—ï¼Œè¾“å‡ºç»“æœåªä¼šä¿ç•™æœ€åä¸€æ¡è¾¹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;ç¬¬ä¸‰æ–¹é›†æˆ&quot;&gt;ç¬¬ä¸‰æ–¹é›†æˆ&lt;/h3&gt;

&lt;p&gt;Graphvizè¿™å¥—ç³»ç»Ÿä¸ä»…ä»…é™äºä½¿ç”¨äººåŠ›æ¥ç»˜åˆ¶ï¼Œå…¶æä¾›äº†æ ‡å‡†çš„Cæ¥å£ï¼Œå¹¶åœ¨è¿™ä¹‹ä¸Šé’ˆå¯¹Java, Perl, PHP, Python, Rubyç­‰è¯­è¨€åšäº†å°è£…ï¼›æ­¤å¤–ä¹Ÿæœ‰ä¸€äº›å¥½ç”¨çš„ç¬¬ä¸‰æ–¹å°è£…ï¼Œæ¯”å¦‚Pythonçš„&lt;a href=&quot;http://pygraphviz.github.io/&quot;&gt;pygraphviz&lt;/a&gt;, &lt;a href=&quot;https://github.com/erocarrera/pydot&quot;&gt;pydot&lt;/a&gt;ï¼Œåœ¨è¿™äº›æ¥å£çš„å¸®åŠ©ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„è¿›è¡Œç¬¬ä¸‰æ–¹é›†æˆï¼Œæ¯”å¦‚ç»˜åˆ¶äººç‰©å…³ç³»å›¾è°±ï¼Œåšå‡½æ•°è°ƒç”¨åˆ†æç­‰ï¼›&lt;/p&gt;

&lt;h3 id=&quot;å¸¸ç”¨å±æ€§-å…·ä½“å‚è€ƒ&quot;&gt;å¸¸ç”¨å±æ€§ (&lt;a href=&quot;http://www.graphviz.org/content/attrs&quot; target=&quot;_blank&quot;&gt;å…·ä½“å‚è€ƒ&lt;/a&gt;)&lt;/h3&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;&lt;strong&gt;[å…±ç”¨]&lt;/strong&gt; å±æ€§åç§°&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;é»˜è®¤å€¼&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;å«ä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;color&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;black&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;é¢œè‰², é€šå¸¸æŒ‡å®šçº¿æ¡é¢œè‰², &lt;a href=&quot;http://www.graphviz.org/content/color-names&quot; target=&quot;_blank&quot;&gt;å…·ä½“å‚è€ƒ&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;penwidth&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1.0&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;çº¿æ¡å®½åº¦&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;style&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;æ ·å¼ï¼Œå¸¸æŒ‡çº¿æ¡æ ·å¼ï¼Œ&lt;a href=&quot;http://www.graphviz.org/content/attrs#kstyle&quot; target=&quot;_blank&quot;&gt;å…·ä½“å‚è€ƒ&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;fontcolor&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;black&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å­—ä½“é¢œè‰²&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;fontname&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Times-Roman&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å­—ä½“&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;fontsize&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;14&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å­—ä½“å¤§å°&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;label&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;id&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;æ ‡ç­¾&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;&lt;strong&gt;[å›¾]&lt;/strong&gt; å±æ€§åç§°&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;é»˜è®¤å€¼&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;å«ä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;bgcolor&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;èƒŒæ™¯é¢œè‰²&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;size&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å¤§å°(inch)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;radio&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;height/width&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;nodesep&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0.25&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;èŠ‚ç‚¹ä¹‹é—´çš„é—´éš”&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;labelloc&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;æ ‡ç­¾å‚ç›´ä½ç½®, å–å€¼æœ‰t(ä¸Š),b(ä¸‹),&lt;del&gt;c(ä¸­ï¼Œdotå¸ƒå±€ä¸‹æ— æ•ˆ)&lt;/del&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;labeljust&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;æ ‡ç­¾æ°´å¹³ä½ç½®, å–å€¼æœ‰l(å·¦),r(å³),c(ä¸­)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;compound&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;false&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ç»„åˆæ¨¡å¼&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;rankdir&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;TB(ä»ä¸Šåˆ°ä¸‹)&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;dotæ¨¡å¼ä¸‹æ’åˆ—æ–¹å‘, {TB,BT,LR,RL}å››ä¸ªå±æ€§å¯é€‰&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;&lt;strong&gt;[èŠ‚ç‚¹]&lt;/strong&gt; å±æ€§åç§°&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;é»˜è®¤å€¼&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;å«ä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;shape&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ellipse&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å½¢çŠ¶, &lt;a href=&quot;http://www.graphviz.org/content/node-shapes&quot; target=&quot;_blank&quot;&gt;å…·ä½“å‚è€ƒ&lt;/a&gt;&lt;br /&gt;å½“shape=polygonæ—¶ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°ä»¥ä¸‹4ä¸ªå€¼ï¼š&lt;br /&gt;sides è¾¹æ•°(&amp;gt;2)&lt;br /&gt;regular æ˜¯å¦æ˜¯ä¸€ä¸ªè§„åˆ™çš„å¤šè¾¹å½¢(é»˜è®¤ä¸º:false)&lt;br /&gt;skew å€¾æ–œè§’åº¦, é€šè¿‡è¯¥å€¼å¯å°†ä¸€ä¸ªçŸ©å½¢è½¬ä¸ºå¹³è¡Œå››è¾¹å½¢, é»˜è®¤ä¸º:0.0&lt;br /&gt;distortion æ¢¯åº¦å€¼, é€šè¿‡è¯¥å€¼å¯å°†ä¸€ä¸ªçŸ©å½¢è½¬ä¸ºæ¢¯å½¢, é»˜è®¤ä¸º:0.0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;peripheries&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å¤–æ¡†å±‚æ•°, æ¯”å¦‚çŠ¶æ€æœºçš„ç»“æŸçŠ¶æ€å¯å°†è¯¥å€¼è®¾ä¸º2å¾—åˆ°ä¸€ä¸ªä¸¤å±‚çš„åœ†ç¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;orientation&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;0.0&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;æ—‹è½¬è§’åº¦&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;fillcolor&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;lightgrey&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å¡«å……é¢œè‰², éå¡«å……ç›¸å…³æ¨¡å¼è¯¥å€¼æ— æ•ˆ, å¡«å……æ¨¡å¼ä¸‹å¦‚æœæœªè®¾å®šè¯¥å€¼, å°†ä½¿ç”¨coloræ¥å¡«å……&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;width&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å®½åº¦, dotæ¨¡å¼æˆ–fixedsize=trueè¯¥å€¼å³ä¸ºæœ€ç»ˆèŠ‚ç‚¹å®½åº¦å€¼, å¦åˆ™è¯¥å€¼æ— æ•ˆ&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;height&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;é«˜åº¦, åŒä¸Š&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;fixedsize&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;false&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å›ºå®šå¤§å°, &lt;a href=&quot;http://www.graphviz.org/content/attrs#dfixedsize&quot; target=&quot;_blank&quot;&gt;å…·ä½“å‚è€ƒ&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;&lt;strong&gt;[è¾¹]&lt;/strong&gt; å±æ€§åç§°&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;é»˜è®¤å€¼&lt;/th&gt;
      &lt;th style=&quot;text-align: left&quot;&gt;å«ä¹‰&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;dir&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;forward&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ç®­å¤´æ–¹å‘ {forward, back, both, none} å››ä¸ªå€¼å¯é€‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;arrowhead&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;normal&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ç®­å¤´å¤´éƒ¨å½¢çŠ¶, &lt;a href=&quot;http://www.graphviz.org/content/attrs#karrowType&quot; target=&quot;_blank&quot;&gt;å…·ä½“å‚è€ƒ&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;arrowtail&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;normal&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ç®­å¤´å°¾éƒ¨å½¢çŠ¶, åŒä¸Š&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;arrowsize&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;1.0&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ç®­å¤´å¤§å°&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;constraint&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;true&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;æ˜¯å¦å½±å“æ•´ä½“æ’åˆ—, &lt;a href=&quot;http://www.graphviz.org/content/attrs#dconstraint&quot; target=&quot;_blank&quot;&gt;å…·ä½“å‚è€ƒ&lt;/a&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;decorate&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;false&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å¦‚æœè®¾ç½®ä¸ºtrue,åœ¨è¾¹çš„labelä¸‹ä¼šæœ‰ä¸€æ¡ä¸‹åˆ’çº¿ä¸è¾¹ç›¸è¿&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;headlabel&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;è¾¹çš„å¤´æ ‡ç­¾&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;taillabel&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;è¾¹çš„å°¾æ ‡ç­¾&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;lhead&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;å›¾å±æ€§ä¸­compoundä¸ºtrueæ—¶, é€šè¿‡è¯¥å€¼è®¾å®šè¢«æŒ‡å‘çš„å­å›¾&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;ltail&lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;Â &lt;/td&gt;
      &lt;td style=&quot;text-align: left&quot;&gt;åŒä¸Š&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;h3 id=&quot;one-more-thing&quot;&gt;One more thing&lt;/h3&gt;

&lt;p&gt;æ²¡æœ‰åšä¸åˆ°åªæœ‰æƒ³ä¸åˆ°ï¼Œå…¶å®Graphvizè¿˜å¯ä»¥åšæ›´å¤šçš„äº‹ï¼Œä¸‹é¢æ˜¯æˆ‘åœ¨ç½‘ç»œä¸Šçœ‹åˆ°çš„å‡ ä¸ªæœ‰æ„æ€çš„ä¾‹å­ï¼š&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;é«˜é€Ÿå…¬è·¯è·¯çº¿å›¾&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph {
    edge[fontname=&quot;SimSun&quot;,fontcolor=red];
    node[fontname=&quot;SimSun&quot;,size=&quot;20,20&quot;];

    åŒ—äº¬[shape=doublecircle];
    æ¹˜æ½­[shape=plaintext]

    //é«˜é€Ÿå…¬è·¯èŠ‚ç‚¹å…³ç³»
    åŒ—äº¬-&amp;gt;çŸ³å®¶åº„-&amp;gt;éƒ‘å·-&amp;gt;æ­¦æ±‰-&amp;gt;é•¿æ²™-&amp;gt;å¹¿å·[label=äº¬æ¸¯æ¾³é«˜é€Ÿ,color=red];
    åŒ—äº¬-&amp;gt;å¤©æ´¥-&amp;gt;æ²ˆé˜³-&amp;gt;é•¿æ˜¥-&amp;gt;å“ˆå°”æ»¨[label=äº¬å“ˆé«˜é€Ÿ,color=lawngreen];
    åŒ—äº¬-&amp;gt;å‘¼å’Œæµ©ç‰¹-&amp;gt;é“¶å·-&amp;gt;å…°å·-&amp;gt;è¥¿å®-&amp;gt;æ‹‰è¨[label=äº¬è—é«˜é€Ÿ,color=purple];
    éƒ‘å·-&amp;gt;è¥¿å®‰-&amp;gt;å…°å·-&amp;gt;ä¹Œé²æœ¨é½[label=è¿éœé«˜é€Ÿ,color=blue]
    ä¸Šæµ·-&amp;gt;æ­å·-&amp;gt;å—æ˜Œ-&amp;gt;æ¹˜æ½­-&amp;gt;è´µé˜³-&amp;gt;æ˜†æ˜[label=æ²ªæ˜†é«˜é€Ÿ,color=orange];
    ç¦å·-&amp;gt;å—æ˜Œ-&amp;gt;æ­¦æ±‰-&amp;gt;è¥¿å®‰-&amp;gt;é“¶å·[label=ç¦é“¶é«˜é€Ÿ,color=brown];
    æ¹˜æ½­-&amp;gt;é•¿æ²™[style=dotted];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/06.jpg&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;UML&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph G{

  fontname = &quot;Courier New&quot;
  fontsize = 10

  node [ fontname = &quot;Courier New&quot;, fontsize = 10, shape = &quot;record&quot; ];
  edge [ fontname = &quot;Courier New&quot;, fontsize = 10 ];

  Animal [ label = &quot;{Animal |+ name : String\l+ age : int\l|+ die() : void\l}&quot; ];

      subgraph clusterAnimalImpl{
          bgcolor=&quot;yellow&quot;
          Dog [ label = &quot;{Dog||+ bark() : void\l}&quot; ];
          Cat [ label = &quot;{Cat||+ meow() : void\l}&quot; ];
      };

  edge [ arrowhead = &quot;empty&quot; ];

  Dog-&amp;gt;Animal;
  Cat-&amp;gt;Animal;
  Dog-&amp;gt;Cat [arrowhead=&quot;none&quot;, label=&quot;0..*&quot;];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/07.gif&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;æ—¶åºå›¾&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;digraph G {
    rankdir=&quot;LR&quot;;
    node[shape=&quot;point&quot;, width=0, height=0];
    edge[arrowhead=&quot;none&quot;, style=&quot;dashed&quot;]

    {
        rank=&quot;same&quot;;
        edge[style=&quot;solided&quot;];
        LC[shape=&quot;plaintext&quot;];
        LC -&amp;gt; step00 -&amp;gt; step01 -&amp;gt; step02 -&amp;gt; step03 -&amp;gt; step04 -&amp;gt; step05;
    }

    {
        rank=&quot;same&quot;;
        edge[style=&quot;solided&quot;];
        Agency[shape=&quot;plaintext&quot;];
        Agency -&amp;gt; step10 -&amp;gt; step11 -&amp;gt; step12 -&amp;gt; step13 -&amp;gt; step14 -&amp;gt; step15;
    }

    {
        rank=&quot;same&quot;;
        edge[style=&quot;solided&quot;];
        Agent[shape=&quot;plaintext&quot;];
        Agent -&amp;gt; step20 -&amp;gt; step21 -&amp;gt; step22 -&amp;gt; step23 -&amp;gt; step24 -&amp;gt; step25;
    }

    step00 -&amp;gt; step10 [label=&quot;sends email new custumer&quot;, arrowhead=&quot;normal&quot;];
    step11 -&amp;gt; step01 [label=&quot;declines&quot;, arrowhead=&quot;normal&quot;];
    step12 -&amp;gt; step02 [label=&quot;accepts&quot;, arrowhead=&quot;normal&quot;];
    step13 -&amp;gt; step23 [label=&quot;forward to&quot;, arrowhead=&quot;normal&quot;];
    step24 -&amp;gt; step14;
    step14 -&amp;gt; step04 [arrowhead=&quot;normal&quot;];
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;/assets/how_do_programmer_express_yourself_better-graphviz/08.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä¸Šè¿°ä¾‹å­æ‰€æ¶‰åŠçš„çŸ¥è¯†ç‚¹åœ¨DOTè¯­è¨€ç« èŠ‚éƒ½æœ‰è¦†ç›–ï¼Œå…·ä½“åˆ†æå’Œä½¿ç”¨å°±äº¤ä¸è¯»è€…å§ï¼Œå¦‚æœæœ‰ä»€ä¹ˆä¸æ˜ç™½çš„å¯ä»¥ç»™æˆ‘ç•™è¨€ï¼›è¿™é‡Œæˆ‘è¦ç€é‡è¯´ä¸‹è½¯ä»¶å·¥ç¨‹ä¸­çš„[æ—¶åºï¼Œæµç¨‹ï¼Œç”¨ä¾‹ï¼ŒçŠ¶æ€ï¼Œç»„ä»¶]å›¾ä½¿ç”¨Graphvizæ¥ç”»è™½ç„¶éƒ½èƒ½å®ç°ï¼Œä½†å¤ªç¹çäº†ä¸€äº›ï¼Œå…³äºè¿™ç±»å›¾å½¢ä¸‹ä¸€ç¯‡æ–‡ç« æˆ‘å°†åŸºäºPlantUMLè®²è¿°å¦‚ä½•ç®€å•ä¼˜é›…çš„è¿›è¡Œæç»˜&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://www.graphviz.org/Documentation.php&quot; target=&quot;_blank&quot;&gt;Graphviz Documentation&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://icodeit.org/2015/11/using-graphviz-drawing/&quot; target=&quot;_blank&quot;&gt;ä½¿ç”¨graphvizç»˜åˆ¶æµç¨‹å›¾(2015ç‰ˆ)&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://smallx.me/2016/04/10/ä½¿ç”¨Graphvizç»˜åˆ¶æµç¨‹å›¾å’Œå…³ç³»å›¾/&quot; target=&quot;_blank&quot;&gt;ä½¿ç”¨Graphvizç»˜åˆ¶æµç¨‹å›¾å’Œå…³ç³»å›¾&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://my.oschina.net/Tsybius2014/blog/617963&quot; target=&quot;_blank&quot;&gt;ä½¿ç”¨Graphvizä¸‹çš„dotå·¥å…·ç»˜åˆ¶å›¾åƒ&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.tonyballantyne.com/graphs.html&quot; target=&quot;_blank&quot;&gt;Drawing Graphs using Dot and Graphviz&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.linuxdevcenter.com/pub/a/linux/2004/05/06/graphviz_dot.html&quot; target=&quot;_blank&quot;&gt;An Introduction to GraphViz and dot&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.ibm.com/developerworks/cn/linux/l-graphvis/&quot; target=&quot;_blank&quot;&gt;ç”¨ Graphviz å¯è§†åŒ–å‡½æ•°è°ƒç”¨&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/2017/07/how_do_programmer_express_yourself_better-graphviz/&quot;&gt;åŸå§‹é“¾æ¥&lt;/a&gt; ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot;&gt;Creative Commons BY-NC-ND 4.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 11 Jul 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/07/how_do_programmer_express_yourself_better-graphviz/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/07/how_do_programmer_express_yourself_better-graphviz/</guid>
        
        <category>Graphviz</category>
        
        <category>DOT</category>
        
        <category>æ•™ç¨‹</category>
        
        <category>å·¥å…·</category>
        
        
      </item>
    
      <item>
        <title>ä½¿ç”¨æ¨¡æ¿å’Œå®é™æ€æ£€æŸ¥ç±»æˆå‘˜æ˜¯å¦å­˜åœ¨</title>
        <description>&lt;p&gt;æ—©åœ¨C++03çš„æ—¶å€™å°±ç”¨æ¨¡æ¿çš„æ–¹å¼å®ç°è¿‡ç±»æˆå‘˜å‡½æ•°çš„é™æ€æ£€æŸ¥ï¼›è¿™ä¸¤å¤©ä¸€ä¸ªå°å…„å¼Ÿåˆé—®åˆ°æˆ‘åŒæ ·é—®é¢˜ï¼Œä½¿ç”¨C++11æ’¸äº†ä¸€ä¸ªé€šç”¨ç‰ˆæœ¬å¯ä»¥æ£€æŸ¥å˜é‡ï¼Œå‡½æ•°å’Œç±»å‹å®šä¹‰ï¼Œä½¿ç”¨GCCå’ŒCLANGç¼–è¯‘éƒ½æ²¡é—®é¢˜ï¼Œä½†åœ¨VS2015ä¸Šå´å‡ºç°äº†è¿·ä¹‹é”™è¯¯ï¼Œå‰åæŠ˜è…¾äº†åŠå¤©ç¡®å®šåº”è¯¥æ˜¯å…¶BUGï¼Œé‡æ–°é€‰å®šæ–¹æ¡ˆæ’¸äº†å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œå…¨å¹³å°å…¼å®¹ï¼Œ&lt;a href=&quot;/assets/use_template_and_macro_to_check_for_member_of_class_is_exist/has.cpp&quot;&gt;ç‚¹æ­¤ä¸‹è½½&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;h3 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h3&gt;

&lt;p&gt;è¿˜æ˜¯ä»éœ€æ±‚å‡ºå‘ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;ç®€å•æ˜“ç”¨ï¼Œå¤§æ¦‚å½¢å¼åº”è¯¥è¿™æ ·ï¼šHAS_MEMBER(type, name)&lt;/li&gt;
    &lt;li&gt;è¦åŒæ—¶æ”¯æŒæˆå‘˜å˜é‡ï¼Œæˆå‘˜å‡½æ•°å’Œç±»å‹å®šä¹‰ï¼Œå¦‚: HAS_MEMBER(std::vector&amp;lt;int&amp;gt;, size), HAS_MEMBER(std::vector&amp;lt;int&amp;gt;, value_type)&lt;/li&gt;
    &lt;li&gt;å¼•å…¥å‡½æ•°å®šä¹‰æ”¯æŒé‡è½½å‡½æ•°ï¼Œå‡½æ•°å®šä¹‰ä¸ºäº†ä¹¦å†™æ–¹ä¾¿é‡‡ç”¨å¼•ç”¨æ–¹å¼ï¼Œå¦‚: HAS_MEMBER(std::vector&amp;lt;int&amp;gt;, push_back, void(const int&amp;amp;))ï¼›å¯¹äºéé‡è½½å‡½æ•°ä¹Ÿå¯æ£€éªŒå…¶æ˜¯å¦ç¬¦åˆå‡½æ•°å®šä¹‰ï¼Œå¦‚: HAS_MEMBER(std::vector&amp;lt;int&amp;gt;, size, size_t())ä¸ºfalse (æ­£ç¡®åº”ä¸º: size_t() const)&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;æµ‹è¯•å…ˆè¡Œï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_MEMBER_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_MEMBER_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_MEMBER_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_MEMBER_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;é‡è½½å‡½æ•°&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;push_back&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;é‡è½½å‡½æ•°æŒ‡å®šå‡½æ•°ç±»å‹&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;éé‡è½½å‡½æ•°&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;éé‡è½½å‡½æ•°å¸¦é”™è¯¯å‡½æ•°ç±»å‹&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;éé‡è½½å‡½æ•°å¸¦æ­£ç¡®å‡½æ•°ç±»å‹&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;value_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ç±»å‹å®šä¹‰&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;IntIntPairType&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pair&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// è§£å†³å®åˆ†ä¸æ¸… &quot;,&quot; çš„é—®é¢˜
&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IntIntPairType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;æˆå‘˜å‡½æ•°&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IntIntPairType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ä¸å­˜åœ¨&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;åˆå§‹ç‰ˆæœ¬&quot;&gt;åˆå§‹ç‰ˆæœ¬&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªå®ç°åœ¨CLANGå’ŒGCCç¼–è¯‘å™¨ä¸‹éƒ½OKï¼Œä½†åœ¨VS2015ä¸‹ä¼šå‡ºç°è¿·ä¹‹é”™è¯¯ï¼Œé€šè¿‡IDEæ™ºèƒ½æç¤ºæŸ¥çœ‹åˆ°çš„å€¼éƒ½æ˜¯å¯¹çš„ï¼Œä½†ä¸€ç¼–è¯‘å°±æœ‰é—®é¢˜ï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯å…¶decltypeå…³é”®å­—å®ç°ä¸Šæœ‰BUG:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;namespace&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;detail&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// å¼•å…¥C++17ä¸­çš„std::void_tå®ç°
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Param_tester&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;_Types&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;void_t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Param_tester&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Types&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;cp&quot;&gt;#define HAS_MEMBER_DEF(name)                                                   \
  namespace detail {                                                           \
  template &amp;lt;class T, class F = void, class V = void&amp;gt;                           \
  struct HasMember_##name : std::false_type {};                                \
  template &amp;lt;class T, class F&amp;gt;                                                  \
  struct HasMember_##name&amp;lt;T, F, void_t&amp;lt;decltype(std::mem_fn&amp;lt;F&amp;gt;(&amp;amp;T::name))&amp;gt;&amp;gt;    \
      : std::true_type {};                                                     \
  template &amp;lt;class T&amp;gt;                                                           \
  struct HasMember_##name&amp;lt;T, void, void_t&amp;lt;decltype(&amp;amp;T::name)&amp;gt;&amp;gt;                 \
      : std::true_type {};                                                     \
  template &amp;lt;class T&amp;gt;                                                           \
  struct HasMember_##name&amp;lt;T, void, void_t&amp;lt;typename T::name&amp;gt;&amp;gt;                   \
      : std::true_type {};                                                     \
  }
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define HAS_MEMBER(type, name, ...)                                            \
  detail::HasMember_##name&amp;lt;type, ##__VA_ARGS__, void&amp;gt;::value
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;ç»ˆæå®ç°&quot;&gt;ç»ˆæå®ç°&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define HAS_MEMBER_DEF(name)                                                   \
  namespace detail {                                                           \
  template &amp;lt;class T, class F = void&amp;gt; class HasMember_##name {                  \
    template &amp;lt;class _Ux&amp;gt;                                                       \
    static std::true_type                                                      \
    Check(int,                                                                 \
          typename std::enable_if&amp;lt;std::is_void&amp;lt;F&amp;gt;::value,                      \
                                  decltype(&amp;amp;_Ux::name) *&amp;gt;::type = nullptr);    \
    template &amp;lt;class _Ux&amp;gt;                                                       \
    static std::true_type                                                      \
    Check(int, decltype(std::mem_fn&amp;lt;F&amp;gt;(&amp;amp;_Ux::name)) * = nullptr);              \
    template &amp;lt;class _Ux&amp;gt;                                                       \
    static std::true_type Check(int, typename _Ux::name * = nullptr);          \
    template &amp;lt;class _Ux&amp;gt; static std::false_type Check(...);                    \
                                                                               \
  public:                                                                      \
    static constexpr bool value = decltype(Check&amp;lt;T&amp;gt;(0))::value;                \
  };                                                                           \
  }
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#define HAS_MEMBER(type, name, ...)                                            \
  detail::HasMember_##name&amp;lt;type, ##__VA_ARGS__&amp;gt;::value
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;æ›´å¤šå®ç°&quot;&gt;æ›´å¤šå®ç°&lt;/h3&gt;

&lt;p&gt;C++17å¼•å…¥çš„&lt;a href=&quot;http://en.cppreference.com/w/cpp/experimental/is_detected&quot; target=&quot;_blank&quot;&gt;std::is_detected&lt;/a&gt;åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæä¾›äº†è§£å†³è¿™ç±»é—®é¢˜çš„ä¸€ä¸ªæ ‡å‡†æ–¹å¼ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;using&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toString_t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;decltype&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;declval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_toString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;is_detected_v&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;toString_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ­¤å¤–&lt;a href=&quot;http://www.boost.org/doc/libs/1_55_0/libs/tti/doc/html/index.html&quot; target=&quot;_blank&quot;&gt;Boost.TTI&lt;/a&gt;å®ç°æ–¹å¼å’Œæˆ‘ä¸Šé¢çš„ç±»ä¼¼ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#include &amp;lt;boost/tti/has_member_function.hpp&amp;gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BOOST_TTI_HAS_MEMBER_FUNCTION&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;foo&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;has_member_function_toString&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;ä½¿ç”¨&quot;&gt;ä½¿ç”¨&lt;/h3&gt;

&lt;p&gt;åœ¨C++14ä¸­(å¦‚æœä¸ä½¿ç”¨template lambdaå¯ä»¥å…¼å®¹C++11ï¼Œåªæ˜¯å†™èµ·æ¥è¦éº»çƒ¦äº›)ï¼Œå¯ä»¥è¿™æ ·ç”¨ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enable_if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ft&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Ff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ft&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)...);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;enable_if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exec&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ft&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ft&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Ff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;...&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Ff&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;forward&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Args&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)...);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ä½¿ç”¨äº†template lamabdaéœ€è¦ä½¿ç”¨C++14é€‰é¡¹ç¼–è¯‘
&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Exec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[](&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;[](&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;vector&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pair&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;é…åˆC++17çš„&lt;a href=&quot;http://www.oschina.net/translate/final-features-of-c17&quot; target=&quot;_blank&quot;&gt;if constexpr&lt;/a&gt;ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æ›´ä¼˜é›…ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;constexpr&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS_MEMBER&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;obj&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;size&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;åç»­&quot;&gt;åç»­&lt;/h3&gt;

&lt;p&gt;å…¶å®æ—©åœ¨è¿œå¤æ—¶ä»£ï¼ŒMSVCå°±æä¾›äº†éæ ‡å‡†æ‰©å±•&lt;a href=&quot;https://msdn.microsoft.com/en-us/library/x7wy9xh3.aspx&quot; target=&quot;_blank&quot;&gt;__if_exists&lt;/a&gt;å…³é”®å­—æ¥å®ç°ä¸Šè¿°çš„åŠŸèƒ½ï¼Œä¸ä»…ä»…èƒ½æ£€æŸ¥ç±»æˆå‘˜ï¼Œè¿˜å¯ä»¥æ£€æŸ¥å…¨å±€å‡½æ•°ï¼Œå…¨å±€å˜é‡ï¼Œå±€éƒ¨å˜é‡ï¼Œä½†æˆ‘å¯¹éæ ‡çš„ä¸œè¥¿ä¸€ç›´æŒæ’æ–¥æ€åº¦ï¼›äºæ˜¯å®ç°äº†ä¸€ä¸ªå…¨å±€æ£€æµ‹ç‰ˆæœ¬ï¼Œåœ¨GCCï¼ŒCLANGä¸Šä¸èƒ½ç¼–è¯‘ï¼Œä½†åœ¨VS2015ä¸Šèƒ½å®Œç¾è¿è¡Œï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define HAS_DEF(name)                                                          \
  namespace detail {                                                           \
  template &amp;lt;class F = void&amp;gt; class Has_##name {                                 \
    template &amp;lt;class _Ux&amp;gt;                                                       \
    static std::true_type                                                      \
    Check(int, typename std::enable_if&amp;lt;std::is_void&amp;lt;F&amp;gt;::value,                 \
                                       decltype(&amp;amp;name) *&amp;gt;::type = nullptr);    \
    template &amp;lt;class _Ux&amp;gt;                                                       \
    static std::true_type                                                      \
    Check(int, decltype(std::bind&amp;lt;void, typename std::decay&amp;lt;F&amp;gt;::type&amp;gt;(         \
                   &amp;amp;name)) * = nullptr);                                       \
    template &amp;lt;class _Ux&amp;gt; static std::false_type Check(...);                    \
                                                                               \
  public:                                                                      \
    static constexpr bool value = decltype(Check&amp;lt;void&amp;gt;(0))::value;             \
  };                                                                           \
  }
#define HAS(name, ...) detail::Has_##name&amp;lt;##__VA_ARGS__&amp;gt;::value
&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#if defined(_MSC_VER) &amp;amp;&amp;amp; (_MSC_VER &amp;gt;= 1900)
&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aaa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;HAS_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Print1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aaa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;HAS_DEF&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif
&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#if defined(_MSC_VER) &amp;amp;&amp;amp; (_MSC_VER &amp;gt;= 1900)
&lt;/span&gt;  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;é‡è½½å‡½æ•°&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;é‡è½½å‡½æ•°æŒ‡å®šå‡½æ•°ç±»å‹&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;éé‡è½½å‡½æ•°&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;éé‡è½½å‡½æ•°å¸¦é”™è¯¯å‡½æ•°ç±»å‹&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;X&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;éé‡è½½å‡½æ•°å¸¦æ­£ç¡®å‡½æ•°ç±»å‹&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aaa&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;å˜é‡&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static_assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HAS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bbb&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;ä¸å­˜åœ¨&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;#endif
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/2017/02/use_template_and_macro_to_check_for_member_of_class_is_exist/&quot;&gt;åŸå§‹é“¾æ¥&lt;/a&gt; ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot;&gt;Creative Commons BY-NC-ND 4.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Wed, 22 Feb 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/02/use_template_and_macro_to_check_for_member_of_class_is_exist/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/02/use_template_and_macro_to_check_for_member_of_class_is_exist/</guid>
        
        <category>C++</category>
        
        <category>æ¨¡æ¿</category>
        
        
      </item>
    
      <item>
        <title>åœ¨macOSä¸‹ä½¿ç”¨Visual Studio Codeè¿›è¡ŒC/C++å¼€å‘</title>
        <description>&lt;p&gt;å¹³æ—¶å·¥ä½œåšC/C++æ–¹é¢çš„å¼€å‘æ›´å¤šè¿˜æ˜¯åœ¨Windowsä¸‹ä½¿ç”¨Visual Studioï¼Œå‡ ä¹éƒ½æ˜¯åšè·¨å¹³å°å¼€å‘ï¼ŒWindowsä¸Šè·‘é€šåLinuxä¸Šç¼–è¯‘å‘å¸ƒï¼ŒåŸºæœ¬ä¸Šéƒ½æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå¦‚æœçš„ç¡®éœ€è¦è°ƒè¯•ï¼Œæœ‰VisualGDBçš„å­˜åœ¨ä¹Ÿå¾ˆæ–¹ä¾¿ï¼›ä½†åœ¨macOSä¸‹ä½¿ç”¨è¿‡IDEæ€§è´¨çš„XCode,CLion,Qt Creatorï¼Œä¹Ÿä½¿ç”¨è¿‡è½»é‡çº§çš„è¯¸å¦‚TextMate, Sublime Textï¼Œä½†å§‹ç»ˆæ‰¾ä¸åˆ°Visual Studioçš„æ„Ÿè§‰ï¼Œå›æƒ³èµ·æ¥macOSä¸‹ä½¿ç”¨æœ€å¤šçš„C/C++å¼€å‘ç¯å¢ƒå±…ç„¶æ˜¯CodeRunnerï¼›ç›´åˆ°æœ€è¿‘è¿™å‡ å¤©æœ‰ç©ºæŠ˜è…¾äº†ä¸€ä¸‹Vistual Studio Codeï¼Œç¬é—´æ‰¾åˆ°äº†åˆæ‹çš„æ„Ÿè§‰!&lt;/p&gt;

&lt;h3 id=&quot;éœ€æ±‚&quot;&gt;éœ€æ±‚&lt;/h3&gt;

&lt;p&gt;ç²—ç•¥æƒ³äº†ä¸‹ï¼Œè¿›è¡ŒC/C++å¼€å‘ï¼Œæˆ‘éœ€è¦çš„åŠŸèƒ½å¤§æ¦‚æœ‰ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æ ¼å¼åŒ–&lt;/li&gt;
  &lt;li&gt;è‡ªåŠ¨å®Œæˆ&lt;/li&gt;
  &lt;li&gt;Lint&lt;/li&gt;
  &lt;li&gt;ç¬¦å·æ£€ç´¢&lt;/li&gt;
  &lt;li&gt;æ–¹ä¾¿çš„è·³è½¬å’ŒæŸ¥çœ‹&lt;/li&gt;
  &lt;li&gt;å¯è§†åŒ–è°ƒè¯•(åˆ«ç»™æˆ‘æGDBï¼Œä½ èƒ½è‹›æ±‚ä¸€ä¸ªè¿VIMéƒ½è®¨åŒçš„äººä½¿ç”¨GDB?)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;è€Œä¸Šé¢è¿™äº›åŠŸèƒ½ä½¿ç”¨Visual Studio Codeå’Œå¿…è¦çš„æ’ä»¶å‡ ä¹å¯ä»¥è¾¾åˆ°Vistual Studio 80%çš„ä½“éªŒ&lt;/p&gt;

&lt;h3 id=&quot;æ‰“é€ &quot;&gt;æ‰“é€ &lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;å®‰è£…&lt;a href=&quot;http://code.visualstudio.com&quot; target=&quot;_blank&quot;&gt;Visual Studio&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;å®‰è£…&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools&quot; target=&quot;_blank&quot;&gt;cpptools&lt;/a&gt;æ’ä»¶ï¼Œè¿™ä¸ªMicrsoftå‡ºå“çš„æ’ä»¶å‡ ä¹å›Šæ‹¬äº†æˆ‘å‰é¢è¯´çš„æ‰€æœ‰åŠŸèƒ½ï¼Œä½†ä»–çš„è‡ªåŠ¨å®Œæˆæ˜¯Fuzzyçš„ï¼Œéå¸¸ç³Ÿç³•ï¼›å¦å¤–ä»–çš„LintåŠŸèƒ½ä¹Ÿè¿›è¡Œåªå±€é™äºæ–‡ä»¶åŒ…å«ï¼›&lt;em&gt;æ³¨ï¼šè¯¥æ’ä»¶å®‰è£…å®Œæˆåä¼šè‡ªåŠ¨å®‰è£…å¿…è¦çš„ä¾èµ–æ›´æ–°&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;å®‰è£…&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=mitaki28.vscode-clang&quot; target=&quot;_blank&quot;&gt;C/C++ Clang&lt;/a&gt;æ’ä»¶ï¼Œè¿™ä¸ªæ’ä»¶åªæœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼Œ&lt;strong&gt;è‡ªåŠ¨å®Œæˆ&lt;/strong&gt;å’Œ&lt;strong&gt;è¯Šæ–­Diagnostic(Lint)&lt;/strong&gt;ï¼Œå…¶ä½¿ç”¨Clangå®æ—¶åˆ†æï¼Œä»€ä¹ˆæ¨¡æ¿åµŒå¥—éƒ½èƒ½åˆ†æï¼ŒåŠŸèƒ½å¼‚å¸¸å¼ºå¤§ï¼›&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä¸Šé¢ä¸¤ä¸ªå¦‚æœåŒæ—¶å¯ç”¨çš„è¯ä¼šå‘ç”Ÿå†²çªï¼Œå¹¶ä¸”[C/C++ Clang]æ’ä»¶é»˜è®¤ä¸è¿›è¡ŒC++11åˆ†æï¼Œç‚¹å‡»[Code]-&amp;gt;[é¦–é€‰é¡¹]-&amp;gt;[ç”¨æˆ·è®¾ç½®]è¿›è¡Œå¦‚ä¸‹é…ç½®:&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;C_Cpp.autocomplete&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Disabled&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clang.cxxflags&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-std=c++11&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;      &lt;/div&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ³¨ï¼šä»…ä»…éœ€è¦ä¸Šé¢ä¸¤ä¸ªæ’ä»¶å°±å¤Ÿäº†ï¼Œé«˜å®‰è£…é‡çš„&lt;a href=&quot;https://marketplace.visualstudio.com/items?itemName=austin.code-gnu-global&quot;&gt;C++ Intellisense&lt;/a&gt;æ’ä»¶åƒä¸‡åˆ«è£…ï¼Œå®ƒä¼šå’Œä¸Šè¿°ä¸¤ä¸ªæ’ä»¶å†²çªï¼Œä»è€Œå‡ºç°å„ç§å¥‡æ€ªé—®é¢˜ï¼›&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;ä½“éªŒ&quot;&gt;ä½“éªŒ&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;æ‰“å¼€ä¸€ä¸ªåŒ…å«æœ‰C/C++æ–‡ä»¶çš„ç›®å½•ï¼›&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;ä½¿ç”¨[F1]æˆ–[â‡§âŒ˜P]æ‰“å¼€å‘½ä»¤æ¨¡å¼ï¼Œé€‰æ‹©[C/Cpp: Edit Configurations]å‘½ä»¤ï¼Œå…¶ä¼šåœ¨ç›®å½•çš„.vscodeé…ç½®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªc_cpp_properties.jsonæ–‡ä»¶ï¼Œä¿®æ”¹MacèŠ‚ç‚¹ä¸‹çš„includePathå˜é‡æ·»åŠ C++11è·³è½¬æ”¯æŒï¼š&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;includePath&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/usr/include&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include/c++/v1&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;      &lt;/div&gt;
      &lt;p&gt;&lt;em&gt;æ³¨ï¼šå¦‚æœå¼•å…¥å…¶ä»–åº“ï¼Œå°†åº“è·¯å¾„æŒ‰ä»¥ä¸Šæ–¹å¼é™„åœ¨åé¢å³å¯&lt;/em&gt;&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;æ‰“å¼€å‘½ä»¤æ¨¡å¼ï¼Œé€‰æ‹©[Tasks: Configure Task Runner]å‘½ä»¤ï¼Œå…¶ä¼šåœ¨ç›®å½•çš„.vscodeé…ç½®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªtasks.jsonæ–‡ä»¶ï¼Œä¿®æ”¹é…ç½®ï¼š&lt;/p&gt;

    &lt;blockquote&gt;
      &lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;See&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;https&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//go.microsoft.com/fwlink/?LinkId=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;733558&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;//&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;the&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;documentation&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;about&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;the&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;tasks.json&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;command&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;clang++&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;isShellCommand&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;main.cpp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-std=c++11&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;-g&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;showOutput&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;always&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;      &lt;/div&gt;
      &lt;p&gt;&lt;em&gt;æ³¨ï¼šmain.cppæ˜¯å…¥å£æ–‡ä»¶ï¼Œä½ å¯ä»¥ä¿®æ”¹æˆä½ è‡ªå·±çš„ï¼Œå¦‚æœæ˜¯æœ‰å¤šä¸ªå…¥å£çš„æµ‹è¯•é¡¹ç›®ï¼Œæˆ‘ä¸€èˆ¬å®šä¹‰ä¸º${file}ï¼Œåªæ˜¯å¿…é¡»é€‰å®šæ–‡ä»¶å¯åŠ¨ï¼›å¦å¤–argsä¸­å¿…é¡»æ·»åŠ -gé€‰é¡¹ï¼Œå¦åˆ™è°ƒè¯•æ— æ•ˆï¼›è¦æ”¯æŒC++11ï¼Œå¿…é¡»æ·»åŠ -std=c++11é€‰é¡¹ï¼›å¦‚æœè¿˜æœ‰å…¶ä»–ç¼–è¯‘è¦æ±‚ï¼Œå°†é€‰é¡¹é™„åŠ åœ¨åé¢å³å¯(è°ƒè¯•æ¨¡å¼æˆ‘ç»å¸¸ä½¿ç”¨â€“save-tempsæ¥æŸ¥çœ‹ç¼–è¯‘ä¸­é—´æ–‡ä»¶)ï¼›ä¹‹å[âŒ˜P]ç„¶åæ‰§è¡Œ[task clang++]ï¼Œæˆ–è€…ç›´æ¥[â‡§âŒ˜B]å°±å¯è‡ªåŠ¨ç¼–è¯‘&lt;/em&gt;.&lt;/p&gt;
    &lt;/blockquote&gt;
  &lt;/li&gt;
  &lt;li&gt;æ‰“å¼€å‘½ä»¤æ¨¡å¼ï¼Œé€‰æ‹©[Debug: Open launch.json]å‘½ä»¤ï¼Œå…¶ä¼šåœ¨ç›®å½•çš„.vscodeé…ç½®ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªlaunch.jsonæ–‡ä»¶ï¼›ä¿®æ”¹programä¸º:${workspaceRoot}/a.outï¼›å¦‚æœéœ€è¦è¯»å–å‚æ•°ï¼Œä¿®æ”¹argsé…ç½®ï¼›æˆ‘ä¸€èˆ¬ä¼šä¹ æƒ¯æ€§çš„åŠ ä¸Šâ€preLaunchTaskâ€: â€œclang++â€é…ç½®ï¼Œè¿™æ ·å½“æºä»£ç å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå¯åŠ¨è°ƒè¯•ä¼šè‡ªåŠ¨ç¼–è¯‘ï¼›&lt;/li&gt;
  &lt;li&gt;ä¹‹åçš„è°ƒè¯•æµç¨‹ï¼ŒåŸºæœ¬ä¸Šå°±å’ŒVistual Studioä¸€æ ·äº†ï¼Œé™„ä¸€å¼ è°ƒè¯•å›¾:&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img src=&quot;/assets/use_vscode_for_c_c++_development_in_macos/01.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;http://code.visualstudio.com/docs/languages/cpp#_getting-started&quot; target=&quot;_blank&quot;&gt;C/C++ for VS Code (Preview)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/2017/01/use_vscode_for_c_c++_development_in_macos/&quot;&gt;åŸå§‹é“¾æ¥&lt;/a&gt; ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot;&gt;Creative Commons BY-NC-ND 4.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Mon, 23 Jan 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/01/use_vscode_for_c_c++_development_in_macos/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/01/use_vscode_for_c_c++_development_in_macos/</guid>
        
        <category>C++</category>
        
        <category>macOS</category>
        
        <category>æ•™ç¨‹</category>
        
        <category>å·¥å…·</category>
        
        
      </item>
    
      <item>
        <title>C++11åŸå­æ“ä½œä¸æ— é”ç¼–ç¨‹</title>
        <description>&lt;p&gt;ä¸è®²è¯­è¨€ç‰¹æ€§ï¼Œåªä»å·¥ç¨‹è§’åº¦å‡ºå‘ï¼Œä¸ªäººè§‰å¾—C++æ ‡å‡†å§”å‘˜ä¼šåœ¨C++11ä¸­å¯¹å¤šçº¿ç¨‹åº“çš„å¼•å…¥æ˜¯æœ‰å²ä»¥æ¥åšå¾—æœ€äººé“çš„ä¸€ä»¶äº‹ï¼›ä»Šå¤©æˆ‘å°†å°±C++11å¤šçº¿ç¨‹ä¸­çš„atomicåŸå­æ“ä½œå±•å¼€è®¨è®ºï¼›æ¯”è¾ƒäº’æ–¥é”ï¼Œè‡ªæ—‹é”(spinlock)ï¼Œæ— é”ç¼–ç¨‹çš„å¼‚åŒï¼Œå¹¶è¿›è¡Œæ€§èƒ½æµ‹è¯•ï¼›æœ€åä¼šè®¨è®ºä¸€ä¸‹å†…å­˜åºçš„é—®é¢˜ï¼›ä¸ºäº†æµç•…é˜…è¯»ä½ æœ€å¥½å…ˆç†Ÿæ‚‰ä¸€ä¸‹C++11 Atomicçš„åŸºæœ¬æ“ä½œ&lt;a href=&quot;http://en.cppreference.com/w/cpp/atomic&quot; target=&quot;_blank&quot;&gt;è‹±æ–‡æ–‡æ¡£&lt;/a&gt;ï¼Œè¿™é‡Œè¿˜æœ‰ä¸€ä»½æˆ‘è§‰å¾—åšå¾—å¾ˆç”¨å¿ƒçš„å…³äºC++11å¹¶å‘ç¼–ç¨‹çš„&lt;a href=&quot;https://github.com/forhappy/Cplusplus-Concurrency-In-Practice&quot; target=&quot;_blank&quot;&gt;ä¸­æ–‡æ•™ç¨‹&lt;/a&gt;ï¼Œä½ ä¹Ÿå¯ä»¥ä»å…¶ä¸­æ‰¾åˆ°å¯¹åº”çš„çŸ¥è¯†ç‚¹ï¼›&lt;/p&gt;

&lt;h3 id=&quot;åŸå­æ“ä½œ&quot;&gt;åŸå­æ“ä½œ&lt;/h3&gt;

&lt;p&gt;æˆ‘ä»¬å†™çš„ä»£ç æœ€ç»ˆéƒ½ä¼šè¢«ç¿»è¯‘ä¸ºCPUæŒ‡ä»¤ï¼Œä¸€æ¡æœ€ç®€å•åŠ å‡æ³•è¯­å¥éƒ½æœ‰å¯èƒ½ä¼šè¢«ç¿»è¯‘æˆå‡ æ¡æŒ‡ä»¤æ‰§è¡Œï¼›ä¸ºäº†é¿å…è¯­å¥åœ¨CPUè¿™ä¸€å±‚çº§ä¸Šçš„æŒ‡ä»¤äº¤å‰å¸¦æ¥çš„è¡Œä¸ºä¸å¯çŸ¥ï¼Œåœ¨å¤šçº¿ç¨‹ç¨‹åºè®¾è®¡æ—¶æˆ‘ä»¬å¿…é¡»é€šè¿‡ä¸€äº›æ–¹å¼æ¥è¿›è¡Œè§„èŒƒï¼›è¿™é‡Œé¢æœ€å¸¸è§çš„åšæ³•å°±æ˜¯å¼•å…¥äº’æ–¥é”ï¼Œå…¶å¤§æ¦‚çš„æ¨¡å‹å°±æ˜¯ç¯®çƒæ¨¡å¼ï¼šå‡ ä¸ªäººä¸€èµ·æŠ¢çƒï¼Œè°æŠ¢åˆ°äº†è°ç©ï¼Œç©å®Œäº†å†æŠŠçƒä¸¢å‡ºæ¥é‡æ–°æŠ¢ï¼›ä½†äº’æ–¥é”æ˜¯æ“ä½œç³»ç»Ÿè¿™ä¸€å±‚çº§çš„ï¼Œæœ€ç»ˆæ˜ å°„åˆ°CPUä¸Šä¹Ÿæ˜¯ä¸€å †æŒ‡ä»¤ï¼Œæ˜¯æŒ‡ä»¤å°±å¿…ç„¶ä¼šå¸¦æ¥é¢å¤–çš„å¼€é”€ï¼›&lt;/p&gt;

&lt;p&gt;æ—¢ç„¶CPUæŒ‡ä»¤æ˜¯å¤šçº¿ç¨‹ä¸å¯å†åˆ†çš„æœ€å°å•å…ƒï¼Œé‚£æˆ‘ä»¬å¦‚æœæœ‰åŠæ³•å°†ä»£ç è¯­å¥å’ŒæŒ‡ä»¤å¯¹åº”èµ·æ¥ï¼Œä¸å°±ä¸éœ€è¦å¼•å…¥äº’æ–¥é”ä»è€Œæé«˜æ€§èƒ½äº†å—? è€Œè¿™ä¸ªå¯¹åº”å…³ç³»å°±æ˜¯æ‰€è°“çš„&lt;strong&gt;åŸå­æ“ä½œ&lt;/strong&gt;ï¼›åœ¨C++11çš„atomicä¸­æœ‰ä¸¤ç§åšæ³•:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;æ¨¡æ‹Ÿ, æ¯”å¦‚è¯´å¯¹äºä¸€ä¸ªatomic&amp;lt;T&amp;gt;ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»–é™„å¸¦ä¸€ä¸ªmutexï¼Œæ“ä½œæ—¶lock/unlockä¸€ä¸‹ï¼Œè¿™ç§åœ¨å¤šçº¿ç¨‹ä¸‹è¿›è¡Œè®¿é—®ï¼Œå¿…ç„¶ä¼šå¯¼è‡´çº¿ç¨‹é˜»å¡ï¼›&lt;/li&gt;
    &lt;li&gt;æœ‰ç›¸åº”çš„CPUå±‚çº§çš„å¯¹åº”ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„&lt;strong&gt;&lt;em&gt;lock-free&lt;/em&gt;&lt;/strong&gt;ç±»å‹ï¼›&lt;/li&gt;
  &lt;/ul&gt;

  &lt;p&gt;&lt;em&gt;å¯ä»¥é€šè¿‡&lt;a href=&quot;http://en.cppreference.com/w/cpp/atomic/atomic/is_lock_free&quot; target=&quot;_blank&quot;&gt;is_lock_free&lt;/a&gt;å‡½æ•°ï¼Œåˆ¤æ–­ä¸€ä¸ªatomicæ˜¯å¦æ˜¯lock-freeç±»å‹&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;è‡ªæ—‹é”&quot;&gt;è‡ªæ—‹é”&lt;/h3&gt;

&lt;p&gt;ä½¿ç”¨åŸå­æ“ä½œæ¨¡æ‹Ÿäº’æ–¥é”çš„è¡Œä¸ºå°±æ˜¯è‡ªæ—‹é”ï¼Œäº’æ–¥é”çŠ¶æ€æ˜¯ç”±æ“ä½œç³»ç»Ÿæ§åˆ¶çš„ï¼Œè‡ªæ—‹é”çš„çŠ¶æ€æ˜¯ç¨‹åºå‘˜è‡ªå·±æ§åˆ¶çš„ï¼›è¦ææ¸…æ¥šè‡ªæ—‹é”æˆ‘ä»¬é¦–å…ˆè¦ææ¸…æ¥šè‡ªæ—‹é”æ¨¡å‹ï¼Œå¸¸ç”¨çš„è‡ªæ—‹é”æ¨¡å‹æœ‰ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;&lt;strong&gt;TAS&lt;/strong&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Test-and-set&quot; target=&quot;_blank&quot;&gt;&lt;u&gt;Test-and-set&lt;/u&gt;&lt;/a&gt;ï¼Œæœ‰ä¸”åªæœ‰atomic_flagç±»å‹ä¸ä¹‹å¯¹åº”&lt;/li&gt;
    &lt;li&gt;&lt;strong&gt;CAS&lt;/strong&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Compare-and-swap&quot; target=&quot;_blank&quot;&gt;&lt;u&gt;Compare-and-swap&lt;/u&gt;&lt;/a&gt;ï¼Œå¯¹åº”atomicçš„compare_exchange_strong å’Œ compare_exchange_weakï¼Œè¿™ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«æ˜¯ï¼šWeakç‰ˆæœ¬å¦‚æœæ•°æ®ç¬¦åˆæ¡ä»¶è¢«ä¿®æ”¹ï¼Œå…¶ä¹Ÿå¯èƒ½è¿”å›falseï¼Œå°±å¥½åƒä¸ç¬¦åˆä¿®æ”¹çŠ¶æ€ä¸€è‡´ï¼›è€ŒStrongç‰ˆæœ¬ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œä½†åœ¨æŸäº›å¹³å°ä¸ŠStrongç‰ˆæœ¬æ¯”Weakç‰ˆæœ¬æ…¢ &lt;em&gt;[&lt;u&gt;æ³¨:åœ¨x86å¹³å°æˆ‘æ²¡å‘ç°ä»–ä»¬ä¹‹é—´æœ‰ä»»ä½•æ€§èƒ½å·®è·&lt;/u&gt;]&lt;/em&gt;ï¼›ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆé€‰æ‹©ä½¿ç”¨Strongç‰ˆæœ¬ï¼›&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘é’ˆå¯¹è¿™ä¸¤ç§æ¨¡å‹åˆ†åˆ«å®ç°äº†ä¸¤ä¸ªç‰ˆæœ¬çš„è‡ªæ—‹é”ï¼Œæœ€ç»ˆä»£ç å¯ä»¥åœ¨æ€§èƒ½æµ‹è¯•ç« èŠ‚ä¸­æ‰¾åˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬è¦æ³¨æ„ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;LOCKæ—¶è‡ªæ—‹é”æ˜¯è‡ªå·±è½®è¯¢çŠ¶æ€ï¼Œå¦‚æœä¸å¼•å…¥ä¸­æ–­æœºåˆ¶ï¼Œä¼šæœ‰å¤§é‡è®¡ç®—èµ„æºæµªè´¹åˆ°è½®è¯¢æœ¬èº«ä¸Šï¼›å¸¸ç”¨çš„åšæ³•æ˜¯ä½¿ç”¨yieldåˆ‡æ¢åˆ°å…¶ä»–çº¿ç¨‹æ‰§è¡Œï¼Œæˆ–ç›´æ¥ä½¿ç”¨sleepæš‚åœå½“å‰çº¿ç¨‹.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;æ— é”ç¼–ç¨‹&quot;&gt;æ— é”ç¼–ç¨‹&lt;/h3&gt;

&lt;p&gt;å¦‚æœçœ‹äº†CASå®ç°çš„è‡ªæ—‹é”ä»£ç ä¼šå‘ç°å…¶æœ‰äº›åˆ«æ‰­ï¼šæ¯æ¬¡éƒ½éœ€è¦å»é‡ç½®expçš„çŠ¶æ€ä¸ºfalseï¼›CASè™½ç„¶ä¹Ÿèƒ½å®ç°è‡ªæ—‹é”ï¼Œä½†é€šå¸¸è¢«æˆ‘ä»¬ç”¨æ¥è¿›è¡Œæ— é”ç¼–ç¨‹ï¼›
ä»€ä¹ˆæ˜¯æ— é”ç¼–ç¨‹å‘¢ï¼Œè®©æˆ‘ä»¬ä»¥ä¸€ä¸ªä¾‹å­å¼€å§‹:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LockFreeStackT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreeStackT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;æ•´ä¸ªé€»è¾‘å¾ˆç®€å•ï¼Œpopåªæ˜¯pushçš„é€†è¿‡ç¨‹ï¼Œè¿™é‡Œæˆ‘ä»¬ä»…ä»…åªåˆ†æä¸€ä¸‹pushï¼šæ¯æ¬¡pushæ—¶å»è·å¾—æ ˆé¡¶å…ƒç´ ï¼Œç”Ÿæˆä¸€ä¸ªæŒ‡å‘æ ˆé¡¶çš„æ–°å…ƒç´ ï¼Œç„¶åä½¿ç”¨CASæ“ä½œå»æ›´æ–°æ ˆé¡¶ï¼Œè¿™é‡Œå¯èƒ½æœ‰ä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;å¦‚æœæ–°å…ƒç´ çš„nextå’Œæ ˆé¡¶ä¸€æ ·ï¼Œè¯æ˜åœ¨ä½ ä¹‹å‰æ²¡äººæ“ä½œå®ƒï¼Œä½¿ç”¨æ–°å…ƒç´ æ›¿æ¢æ ˆé¡¶é€€å‡ºå³å¯ï¼›&lt;/li&gt;
    &lt;li&gt;å¦‚æœä¸ä¸€æ ·ï¼Œè¯æ˜åœ¨ä½ ä¹‹å‰å·²ç»æœ‰äººæ“ä½œå®ƒï¼Œæ ˆé¡¶å·²å‘ç”Ÿæ”¹å˜ï¼Œè¯¥å‡½æ•°ä¼šè‡ªåŠ¨æ›´æ–°æ–°å…ƒç´ çš„nextå€¼ä¸ºæ”¹å˜åçš„æ ˆé¡¶ï¼›ç„¶åç»§ç»­å¾ªç¯æ£€æµ‹ç›´åˆ°çŠ¶æ€1æˆç«‹é€€å‡ºï¼›&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;ä¸éš¾çœ‹å‡ºï¼Œå…¶å®æ‰€è°“æ— é”ç¼–ç¨‹åªæ˜¯&lt;strong&gt;å°†å¤šæ¡æŒ‡ä»¤åˆå¹¶æˆäº†ä¸€æ¡æŒ‡ä»¤å½¢æˆä¸€ä¸ªé€»è¾‘å®Œå¤‡çš„æœ€å°å•å…ƒï¼Œé€šè¿‡å…¼å®¹CPUæŒ‡ä»¤æ‰§è¡Œé€»è¾‘å½¢æˆçš„ä¸€ç§å¤šçº¿ç¨‹ç¼–ç¨‹æ¨¡å‹&lt;/strong&gt;ï¼›ç»“æŸäº†å—ï¼Œå†ç­‰ç­‰ï¼Œä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œæœ‰å¾ˆå¤§çš„å‡ ç‡å‡ºdeleteä¸å­˜åœ¨çš„å†…å­˜ï¼Œæˆ–å†…å­˜è¢«å¤šæ¬¡deleteçš„é”™è¯¯ï¼Œè®©æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€èŠ‚.&lt;/p&gt;

&lt;h3 id=&quot;abaé—®é¢˜&quot;&gt;ABAé—®é¢˜&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/ABA_problem&quot; target=&quot;_blank&quot;&gt;ç»´åŸºç™¾ç§‘: ABA problem&lt;/a&gt;ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªçº¿ç¨‹[1&amp;amp;2]æ“ä½œä¸Šé¢çš„å †æ ˆï¼Œåˆå§‹çŠ¶æ€æœ‰2ä¸ªå…ƒç´ : top-&amp;gt;A-&amp;gt;Bï¼Œçº¿ç¨‹1æ‰§è¡Œpopæ“ä½œï¼Œåœ¨CASå‰è¿›è¡Œçº¿ç¨‹åˆ‡æ¢:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;æ³¨æ„popå‡½æ•°ä¸­çš„head_.compare_exchange_strong(node, node-&amp;gt;next)è¯­å¥ï¼Œå¦‚æœå¯¹C/C++ä¸å¤Ÿç†Ÿæ‚‰ï¼Œå¾ˆå®¹æ˜“å‘ç”Ÿè¯¯è§£ï¼›æˆ‘ä»¬ä¸è€ƒè™‘å‡½æ•°åŒ…è£…ç­‰å¤æ‚æƒ…å†µï¼Œåªè€ƒè™‘æœ€ç®€å•çš„æƒ…å†µä¸‹åœ¨è°ƒç”¨CASåŸå­æ“ä½œå‰è‡³å°‘è¿˜æœ‰å‚æ•°å‹æ ˆæ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´node-&amp;gt;nextä¸æ˜¯è°ƒç”¨æ—¶ç¡®å®šçš„ï¼Œè€Œæ˜¯åœ¨å‚æ•°å‹æ ˆæ—¶ç¡®å®šçš„ï¼›å‰é¢è¯´çš„CASæ“ä½œå‰è¿›è¡Œçº¿ç¨‹åˆ‡æ¢ï¼Œåˆ‡æ¢æ—¶{node, node-&amp;gt;next}å¯¹åº”çš„æ˜¯{A, B}.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;ç„¶åçº¿ç¨‹2æ‰§è¡Œpopæ“ä½œï¼Œå°†Aï¼ŒBéƒ½åˆ æ‰ï¼Œç„¶ååˆ›å»ºäº†ä¸€ä¸ªæ–°å…ƒç´ pushè¿›å»ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿçš„å†…å­˜åˆ†é…æœºåˆ¶ä¼šé‡å¤ä½¿ç”¨ä¹‹å‰é‡Šæ”¾çš„å†…å­˜ï¼Œæ°å¥½pushè¿›å»çš„å†…å­˜åœ°å€å’ŒAä¸€æ ·ï¼Œæˆ‘ä»¬è®°ä¸ºAâ€™ï¼Œè¿™æ—¶å€™åˆ‡æ¢åˆ°çº¿ç¨‹1ï¼ŒCASæ“ä½œæ£€æŸ¥åˆ°Aæ²¡å˜åŒ–æˆåŠŸå°†Bè®¾ä¸ºæ ˆé¡¶ï¼Œä½†Bæ˜¯ä¸€ä¸ªå·²ç»è¢«é‡Šæ”¾çš„å†…å­˜å—â€¦&lt;/p&gt;

&lt;p&gt;è§£å†³ABAé—®é¢˜çš„åŠæ³•æ— éå°±æ˜¯é€šè¿‡æ‰“æ ‡ç­¾æ ‡è¯†Aå’ŒAâ€™ä¸ºä¸åŒçš„æŒ‡é’ˆï¼Œè¿™ä¸‹æ€»ç»“æŸäº†å§ï¼Œäº‹å®ä¸Šè¿˜æ²¡æœ‰ï¼Œå†æ¬¡è¿›å…¥ä¸‹ä¸€èŠ‚.&lt;/p&gt;

&lt;h3 id=&quot;å†…å­˜å›æ”¶&quot;&gt;å†…å­˜å›æ”¶&lt;/h3&gt;

&lt;p&gt;è¿˜æ˜¯å…ˆçœ‹ä¸Šé¢çš„ä»£ç ï¼Œåœ¨Popæ—¶å…ˆè·å¾—äº†å¤´æŒ‡é’ˆ&lt;em&gt;Node* node = head_.load();&lt;/em&gt;ï¼Œå¦‚æœè¿™æ—¶å€™å‘ç”Ÿçº¿ç¨‹åˆ‡æ¢å¹¶ä¸”è¿™ä¸ªèŠ‚ç‚¹è¢«å¦ä¸€ä¸ªçº¿ç¨‹åˆ é™¤ï¼Œå½“çº¿ç¨‹åˆ‡å›æ—¶å€™nodeæ— æ•ˆé€ æˆnode-&amp;gt;nextè®¿é—®å¼‚å¸¸â€¦ï¼Œå¯¹äºè¿™ä¸ªé—®é¢˜ï¼Œç°åœ¨æµè¡Œçš„å¤„ç†æ–¹å¼ä¸»è¦æœ‰ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;Lock-Free Reference Counting: å¼•ç”¨è®¡æ•°æ–¹å¼ï¼Œä¸¥æ ¼çš„è¯´åº”è¯¥æ˜¯å…¨å±€è®¡æ•°æ–¹å¼ï¼›æ¯æ¬¡POPæ—¶é¦–å…ˆå¢åŠ è®¡æ•°ï¼Œç„¶åå¤„ç†å®Œååšæ£€æµ‹ï¼Œè®¡æ•°å¦‚æœå¤§äº1è¯æ˜å…¶ä»–çº¿ç¨‹ä¹Ÿåœ¨æ“ä½œï¼ŒæŠŠèŠ‚ç‚¹å­˜èµ·æ¥ï¼›åªè¦æ£€æµ‹åˆ°è®¡æ•°ç­‰äº1ï¼Œè¯æ˜ç›®å‰åªæœ‰è‡ªå·±æ“ä½œï¼Œå¯ä»¥åˆ é™¤å½“å‰èŠ‚ç‚¹å’Œä¹‹å‰ç¼“å­˜çš„èŠ‚ç‚¹ï¼Œåˆ é™¤ä¹‹å‰èŠ‚ç‚¹æ—¶å¿…é¡»è¿›è¡ŒäºŒæ¬¡åˆ¤æ–­æ¥è§£å†³äº¤æ¢åï¼Œå…¶ä»–çº¿ç¨‹Acquireçš„é—®é¢˜ï¼›å…·ä½“å¯ä»¥å‚è§Paper: &lt;a href=&quot;http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.92.8221&amp;amp;rep=rep1&amp;amp;type=pdf&quot; target=&quot;_blank&quot;&gt;Lock-Free Reference Counting&lt;/a&gt;, &lt;a href=&quot;http://www.cse.chalmers.se/~tsigas/papers/MemoryReclamation-ReferenceCounting-ISPAN05.pdf&quot; target=&quot;_blank&quot;&gt;Efficient and Reliable Lock-Free Memory Reclamation Based on Reference Counting&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;Hazard pointer: ä½¿ç”¨POPçš„çº¿ç¨‹ï¼Œéƒ½æœ‰ä¸€ä¸ªè‡ªå·±å¯ä»¥å†™çš„thread_localå˜é‡ï¼Œæ¯æ¬¡å¾—åˆ°çš„æ—§æŒ‡é’ˆéƒ½å­˜å…¥å…¶ä¸­ï¼Œå½“äº¤æ¢å®Œæˆåå°†è¯¥å˜é‡ç½®ä¸º0ï¼›å¯¹äºå…¶ä»–çº¿ç¨‹æ¥è¯´æ¯æ¬¡åˆ é™¤å‰å¯¹æ•´ä¸ªHazard pointerè¡¨éå†ä¸€éï¼Œå¦‚æœå‘ç°å…¶ä»–çº¿ç¨‹ä¹Ÿåœ¨è®¿é—®ï¼Œå°±æŠŠè¦åˆ é™¤çš„èŠ‚ç‚¹æ”¾å…¥å°†åˆ åˆ—è¡¨ä¸­ï¼Œå¦åˆ™å¯ä»¥ç›´æ¥åˆ é™¤ï¼›å®šæ—¶å¯¹å°†åˆ åˆ—è¡¨ä¸­çš„èŠ‚ç‚¹æŒ‰ç…§ä¹‹å‰çš„è§„åˆ™å’Œæ•´ä¸ªHazard pointerè¡¨åšæ¯”è¾ƒï¼Œåªè¦Hazard pointerè¡¨ä¸æŒæœ‰è¿™ä¸ªèŠ‚ç‚¹å°±å¯åˆ é™¤ï¼›å¯å‚è€ƒ&lt;a href=&quot;https://en.wikipedia.org/wiki/Hazard_pointer&quot; target=&quot;_blank&quot;&gt;ç»´åŸºç™¾ç§‘: Hazard pointer&lt;/a&gt;&lt;/li&gt;
    &lt;li&gt;Epoch Based Reclamation&lt;/li&gt;
    &lt;li&gt;Quiescent State Based Reclamation&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;æˆ‘å®ç°äº†å‰ä¸¤ç§æ–¹å¼ï¼Œåä¸¤ç§æ–¹å¼å¦‚æœä»¥åæœ‰æ—¶é—´å†è¡¥ä¸Šï¼›&lt;/p&gt;

&lt;h3 id=&quot;æ€§èƒ½æµ‹è¯•&quot;&gt;æ€§èƒ½æµ‹è¯•&lt;/h3&gt;

&lt;p&gt;æœ¬æ¥æƒ³æŒ–ä¸ªå‘ï¼Œåœ¨Githubä¸Šé‡æ–°å»ºä¸€ä¸ªé¡¹ç›®çš„ï¼›ä½†å·¥ä½œå¤ªå¿™ï¼Œç»™è‡ªå·±æŒ–çš„å‘ä¹Ÿå¤ªå¤šäº†ï¼ŒæŒ–äº†ä¼°è®¡ä¹Ÿä»…ä»…åªæ˜¯æŒ–äº†ï¼Œæ²¡ç²¾åŠ›å»ç»´æŠ¤ï¼›å¥½åœ¨ä»£ç æ˜¯å®Œæ•´çš„ï¼Œé€»è¾‘ä¹Ÿç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œå°†ä»¥ä¸‹ä»£ç æ‹·åˆ°ä¸€ä¸ªCPPæ–‡ä»¶ä¸­ç¼–è¯‘ä¸€ä¸‹å°±èƒ½è¿è¡Œï¼›æµ‹è¯•ä¸Šåœ¨VS2015ä¸­åŸºæœ¬å…¨è¦†ç›–çš„å•å…ƒæµ‹è¯•è·‘è¿‡ï¼ŒmacOSä¸Šä¹Ÿç»è¿‡äº†å¤§æ¦‚8ä¸ªå°æ—¶çš„å‹åŠ›æµ‹è¯•ï¼Œåº”è¯¥æ²¡å¤ªå¤§é—®é¢˜ï¼Œå¦‚æœæœ‰é—®é¢˜è¯·ä¸æˆ‘è”ç³»ï¼Œå…ˆè´´ä»£ç ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;div class=&quot;language-c++ highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;#define _ENABLE_ATOMIC_ALIGNMENT_FIX 1    // VS2015 SP2 BUG
#include &amp;lt;iostream&amp;gt;
#include &amp;lt;thread&amp;gt;
#include &amp;lt;mutex&amp;gt;
#include &amp;lt;atomic&amp;gt;
#include &amp;lt;chrono&amp;gt;
#include &amp;lt;cassert&amp;gt;
&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique_ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SpinLockByTasT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic_flag&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;locked_flag_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ATOMIC_FLAG_INIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locked_flag_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;test_and_set&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this_thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yield&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this_thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sleep_for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chrono&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;microseconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;locked_flag_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;SpinLockByCasT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;locked_flag_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ATOMIC_VAR_INIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;locked_flag_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;exp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this_thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;yield&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this_thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sleep_for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chrono&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;microseconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_SleepWhenAcquireFailedInMicroSeconds&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;locked_flag_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LockedStackT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockedStackT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lock_guard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lock_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// ä¸éœ€è¦é”æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªå¯èƒ½æ˜¯ä¸€ä¸ªè€—æ—¶æ“ä½œ
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lock_guard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lock_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique_ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique_ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// åŒä¸Šï¼Œåªéœ€è¦é”é“¾è¡¨æœ¬èº«ï¼Œå…¶ä»–æ“ä½œå¯ä»¥æ”¾åˆ°é“¾è¡¨å¤–æ‰§è¡Œ
&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lock_guard&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Lock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lock_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;move&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
 
&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_Lock&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lock_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MemoryReclamationByReferenceCountingT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;counter_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ATOMIC_VAR_INIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ATOMIC_VAR_INIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;InsertToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;InsertToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;InsertToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;last&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemoryReclamationByReferenceCountingT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// å¦‚æœçº¿ç¨‹æ­£å¸¸é€€å‡ºï¼ŒReference Countingç®—æ³•èƒ½åˆ é™¤æ‰€æœ‰æ•°æ®
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exchange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Addref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Release&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exchange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;InsertToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;InsertToList&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;counter_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_MaxPopThreadCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MemoryReclamationByHazardPointerT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HazardPointer&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ATOMIC_VAR_INIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;HazardPointer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hps_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_MaxPopThreadCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ATOMIC_VAR_INIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_ReleaseImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// æ£€æŸ¥HazardPointersä¸­æ˜¯å¦æœ‰çº¿ç¨‹æ­£åœ¨è®¿é—®å½“å‰æŒ‡é’ˆ
&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_MaxPopThreadCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hps_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_MaxPopThreadCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ— ä»»ä½•çº¿ç¨‹æ­£åœ¨è®¿é—®å½“å‰æŒ‡é’ˆï¼Œç›´æ¥åˆ é™¤
&lt;/span&gt;      &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// æœ‰çº¿ç¨‹æ­£åœ¨è®¿é—®ï¼ŒåŠ å…¥ç¼“å­˜åˆ—è¡¨
&lt;/span&gt;      &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MemoryReclamationByHazardPointerT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;// è‡ªå·±ä¸èƒ½åˆ é™¤è‡ªå·±ï¼Œæ­£å¸¸é€€å‡ºHazardPointerå§‹ç»ˆä¼šæŒæœ‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåªèƒ½åœ¨æ­¤åšæ¸…ç†
&lt;/span&gt;    &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exchange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;assert&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;inline&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Addref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HazardPointerOwner&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;HazardPointer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;HazardPointerOwner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HazardPointer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_MaxPopThreadCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;this_thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hps&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;HazardPointerOwner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;thread_local&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HazardPointerOwner&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;owner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hps_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;owner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;owner&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Release&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_ReleaseImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// å¯¹å½“å‰ä¼ å…¥æŒ‡é’ˆè¿›è¡Œé‡Šæ”¾æ“ä½œ
&lt;/span&gt;                        &lt;span class=&quot;c1&quot;&gt;// å¾ªç¯æ£€æµ‹will_be_deleted_list_, å¯ä»¥å¦å¼€ä¸€ä¸ªçº¿ç¨‹å®šæ—¶æ£€æµ‹æ•ˆç‡ä¼šæ›´é«˜
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;will_be_deleted_list_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exchange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;_Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;to_delete_list&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;_ReleaseImpl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_MemoryReclamation&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;LockFreeStackT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;size_t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_tag&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;~&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockFreeStackT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;exchange&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;delete&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Node&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique_ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;memory_reclamation_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Addref&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;memory_reclamation_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;// HazardPointerç®—æ³•å‚¨å­˜(ç›¸å½“äºä¸Šé”)åï¼Œéœ€è¦å¯¹æœ‰æ•ˆå€¼è¿›è¡ŒäºŒæ¬¡ç¡®è®¤ï¼Œå¦åˆ™è¿˜æ˜¯æœ‰å…ˆåˆ é™¤çš„é—®é¢˜
&lt;/span&gt;      &lt;span class=&quot;c1&quot;&gt;// è¿™æ ·åšå¹¶æ²¡æ•ˆç‡é—®é¢˜ï¼Œä¸ç­‰çš„æƒ…å†µCASæ“ä½œä¹Ÿä¼šè¿›è¡Œå¾ªç¯ï¼Œå› æ­¤å¯ä»¥ä½œä¸ºé’ˆå¯¹ä»»ä½•å†…å­˜å›æ”¶ç®—æ³•çš„å›ºå®šå†™æ³•
&lt;/span&gt;      &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;load&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;memcmp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;sizeof&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;compare_exchange_strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;memory_reclamation_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Store&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unique_ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;swap&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;memory_reclamation_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Release&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;o&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;move&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ret&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;atomic&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;head_&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ATOMIC_VAR_INIT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TaggedPointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;nullptr&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;_MemoryReclamation&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;memory_reclamation_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;typename&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_ThreadCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_LoopCount&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100000&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;_ProcessUnit&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_ProcessUnit&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;puf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;thread&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_ThreadCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;auto&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;st&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chrono&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;high_resolution_clock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_ThreadCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;kr&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_LoopCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;puf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_ThreadCount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ths&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period_in_ms&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;static_cast&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;double&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chrono&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;high_resolution_clock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;st&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;chrono&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;high_resolution_clock&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;period&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;den&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;period_in_ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;_Ty&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;LockedStack with std::mutex&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t\t\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockedStackT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;mutex&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;LockedStack with SpinLockByTas yield&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockedStackT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SpinLockByTasT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;&amp;gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;LockedStack with SpinLockByCas yield&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockedStackT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SpinLockByCasT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;&amp;gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;LockedStack with SpinLockByTas usleep(5)&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockedStackT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SpinLockByTasT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;LockedStack with SpinLockByCas usleep(5)&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockedStackT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SpinLockByCasT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;LockFreeStack with MemoryReclamationByReferenceCounting&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockFreeStackT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MemoryReclamationByReferenceCountingT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cout&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;LockFreeStack with MemoryReclamationByHazardPointer&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\t\t&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;LockFreePerformanceTestT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;LockFreeStackT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MemoryReclamationByHazardPointerT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NodeT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint32_t&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;

&lt;p&gt;æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š
&lt;img src=&quot;/assets/cpp11_atomic_and_lockfree_program/proformance_test_excel.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;em&gt;æ³¨ï¼šåœ¨Windows x64ä¸‹ï¼Œatomic&amp;lt;size=16&amp;gt;ä¸æ˜¯lockfreeï¼Œå¦‚æœæœ‰éœ€è¦è¦å¯ä»¥ç”¨InterlockedCompareExchange128è‡ªå·±å®ç°ä¸€ä¸‹ï¼›&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;å†…å­˜æ¨¡å‹&quot;&gt;å†…å­˜æ¨¡å‹&lt;/h3&gt;

&lt;p&gt;C++11åŸå­æ“ä½œçš„å¾ˆå¤šå‡½æ•°éƒ½æœ‰ä¸ªstd::memory_orderå‚æ•°ï¼Œè¿™ä¸ªå‚æ•°å°±æ˜¯è¿™é‡Œæ‰€è¯´çš„å†…å­˜æ¨¡å‹ï¼Œå…¶å¹¶ä¸æ˜¯ç±»ä¼¼PODçš„å†…å­˜å¸ƒå±€ï¼Œè€Œæ˜¯ä¸€ç§æ•°æ®åŒæ­¥æ¨¡å‹ï¼Œå‡†ç¡®è¯´æ³•åº”è¯¥æ˜¯å‚¨å­˜ä¸€è‡´æ€§æ¨¡å‹ï¼Œå…¶ä½œç”¨æ˜¯å¯¹åŒä¸€æ—¶é—´çš„è¯»å†™æ“ä½œè¿›è¡Œæ’åºï¼›C++11ä¸­ä¸€ä¸ªå®šä¹‰äº†6ç§ç±»å‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†ä¸º4ç±»ï¼Œä¸‹é¢æˆ‘ä»æˆ‘çš„è§’åº¦ä»¥æ™®é€šç¨‹åºå‘˜èƒ½ç†è§£çš„è¯­è¨€æè¿°ä¸€ä¸‹ï¼Œå…·ä½“çš„å¯ä»¥å‚è§ &lt;a href=&quot;http://en.cppreference.com/w/cpp/atomic/memory_order&quot; target=&quot;_blank&quot;&gt;C++11 Memory Order&lt;/a&gt;ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ol&gt;
    &lt;li&gt;memory_order_relaxed: å¾ˆå¤šæ–‡æ¡£éƒ½è¯´è¿™ç§æ¨¡å‹æ˜¯å®Œå…¨ä¹±åºçš„ï¼Œä½†æˆ‘ç†è§£åŒä¸€çº¿ç¨‹å†…ï¼ŒåŸºæœ¬ä¸Šåº”è¯¥è¿˜æ˜¯æŒ‰ç…§ä»£ç é¡ºåºæ‰§è¡Œçš„ï¼›&lt;/li&gt;
    &lt;li&gt;memory_order_release &amp;amp; memory_order_acquire: ä¸¤ä¸ªçº¿ç¨‹A&amp;amp;Bï¼ŒAçº¿ç¨‹Releaseåï¼ŒBçº¿ç¨‹Acquireèƒ½ä¿è¯ä¸€å®šè¯»åˆ°çš„æ˜¯æœ€æ–°è¢«ä¿®æ”¹è¿‡çš„å€¼ï¼›è¿™ç§æ¨¡å‹æ›´å¼ºå¤§çš„åœ°æ–¹åœ¨äºå®ƒèƒ½ä¿è¯å‘ç”Ÿåœ¨A-Releaseå‰çš„æ‰€æœ‰å†™æ“ä½œï¼Œåœ¨B-Acquireåéƒ½èƒ½è¯»åˆ°æœ€æ–°å€¼ï¼›&lt;/li&gt;
    &lt;li&gt;memory_order_release &amp;amp; memory_order_consume: ä¸Šä¸€ä¸ªæ¨¡å‹çš„åŒæ­¥æ˜¯é’ˆå¯¹æ‰€æœ‰å¯¹è±¡çš„ï¼Œè¿™ç§æ¨¡å‹åªé’ˆå¯¹ä¾èµ–äºè¯¥æ“ä½œæ¶‰åŠçš„å¯¹è±¡ï¼šæ¯”å¦‚è¿™ä¸ªæ“ä½œå‘ç”Ÿåœ¨å˜é‡aä¸Šï¼Œè€Œs = a + b; é‚£sä¾èµ–äºaï¼Œä½†bä¸ä¾èµ–äºa; å½“ç„¶è¿™é‡Œä¹Ÿæœ‰å¾ªç¯ä¾èµ–çš„é—®é¢˜ï¼Œä¾‹å¦‚ï¼št = s + 1ï¼Œå› ä¸ºsä¾èµ–äºaï¼Œé‚£tå…¶å®ä¹Ÿæ˜¯ä¾èµ–äºaçš„ï¼›&lt;/li&gt;
    &lt;li&gt;memory_order_seq_cst: é¡ºåºä¸€è‡´æ€§æ¨¡å‹ï¼Œè¿™æ˜¯C++11åŸå­æ“ä½œçš„&lt;strong&gt;é»˜è®¤æ¨¡å‹&lt;/strong&gt;ï¼›å¤§æ¦‚è¡Œä¸ºä¸ºå¯¹æ¯ä¸€ä¸ªå˜é‡éƒ½è¿›è¡Œ2ä¸­æ‰€è¯´çš„Release-Acquireæ“ä½œï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯ä¸€ä¸ªæœ€æ…¢çš„åŒæ­¥æ¨¡å‹ï¼›&lt;/li&gt;
  &lt;/ol&gt;
&lt;/blockquote&gt;

&lt;p&gt;è¯´åˆ°å†…å­˜æ¨¡å‹ï¼Œå°±ä¸å¾—ä¸æä¸€ä¸‹ç»å¸¸è¢«å¤§å®¶è¯¯ç”¨çš„ &lt;strong&gt;&lt;em&gt;volatile&lt;/em&gt;&lt;/strong&gt; å…³é”®å­—ï¼Œè¿™ä¸ªå…³é”®å­—ä»…ä»…ä¿è¯ï¼š&lt;strong&gt;æ•°æ®åªåœ¨å†…å­˜ä¸­è¯»å†™&lt;/strong&gt;ï¼Œç›´æ¥æ“ä½œå®ƒæ—¢ä¸èƒ½ä¿è¯æ“ä½œæ˜¯atomicçš„ï¼Œä¹Ÿä¸èƒ½ä¿è¯Memory Orderï¼›å…¶å®åœ¨æˆ‘ç†è§£ä¸­ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯åµŒå…¥å¼ï¼Œå†…æ ¸æˆ–é©±åŠ¨ç¨‹åºå‘˜ä¸“ç”¨å…³é”®å­—:)ï¼Œå½“ç„¶å¦‚æœåœ¨ç«äº‰ä¸æ•æ„Ÿçš„ç¯å¢ƒä¸­ç”¨æ¥åšflagç”¨ä¸€ä¸‹ä¹Ÿæ²¡å¤ªå¤§é—®é¢˜.&lt;/p&gt;

&lt;p&gt;æœ€åè¦è¯´ä¸€ä¸‹x86ä½“ç³»ä¸­Release-Acquireæ˜¯è‡ªåŠ¨è·å–çš„ï¼Œæœ€ç»ˆå½¢æˆä¸€ä¸ª&lt;strong&gt;&lt;em&gt;memory_order_seq_cst&lt;/em&gt;&lt;/strong&gt;æ¨¡å‹ï¼›å› æ­¤ç»å¤§å¤šæ•°æƒ…å†µä¸‹&lt;strong&gt;&lt;em&gt;memory_order_relaxed&lt;/em&gt;&lt;/strong&gt;å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆç”¨.&lt;/p&gt;

&lt;h3 id=&quot;ç»“è¯­&quot;&gt;ç»“è¯­&lt;/h3&gt;

&lt;p&gt;æ— é”ç¼–ç¨‹çœŸçš„å¾ˆéš¾ï¼Œå¦‚æœè¦å®Œå…¨å†™å¯¹é‚£å°±æˆäº†å˜æ€éš¾ï¼Œå‡ºé”™äº†å¹³æ—¶å¸¸è§çš„è°ƒè¯•æ‰‹æ®µæ ¹æœ¬æ²¡ç”¨ï¼Œå‡ ä¹å…¨é è„‘è¡¥ï¼›å¹¶ä¸”è¿™ç§è½®è¯¢æ–¹å¼ç›¸å¯¹äºé”çš„ä¸­æ–­æŒ‚èµ·æ–¹å¼æ¥è®²ï¼Œåªæœ‰åœ¨è¶…é«˜å¹¶å‘çš„å‰æä¸‹æ‰èƒ½è¾¾åˆ°ä¸€ä¸ªç†æƒ³çš„æ•ˆæœï¼Œä½å¹¶å‘ä¸‹ç©ºè½½ä¼šå¯¹ç³»ç»Ÿèµ„æºé€ æˆæå¤§çš„æµªè´¹ï¼Œå› æ­¤åŸåˆ™ä¸Šæˆ‘ä¸æ¨å´‡è¿™ä¸ªç©æ„ï¼›ä»æµ‹è¯•ç»“æœæ¥çœ‹ï¼Œæ‰€æœ‰å¹³å°ä¸Šè‡ªæ—‹é”æ€§èƒ½éƒ½éå¸¸æ¥è¿‘æ— é”å®ç°ï¼Œå¹¶ä¸”å…¶ä½¿ç”¨æ–¹å¼å’Œäº’æ–¥é”å‡ ä¹æ²¡å·®åˆ«ï¼Œå› æ­¤åœ¨æ²¡å•ƒé€ä¹‹å‰ï¼Œä½¿ç”¨é”çš„æ–¹å¼æ‰æ˜¯æ˜æ™ºçš„é€‰æ‹©.&lt;/p&gt;

&lt;h3 id=&quot;å‚è€ƒèµ„æ–™&quot;&gt;å‚è€ƒèµ„æ–™&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/forhappy/Cplusplus-Concurrency-In-Practice&quot; target=&quot;_blank&quot;&gt;C++ å¹¶å‘ç¼–ç¨‹æŒ‡å—&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://www.codeproject.com/articles/153898/yet-another-implementation-of-a-lock-free-circular&quot; target=&quot;_blank&quot;&gt;Yet another implementation of a lock-free circular array queue&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.memsql.com/common-pitfalls-in-writing-lock-free-algorithms/&quot; target=&quot;_blank&quot;&gt;Common Pitfalls in Writing Lock-Free Algorithms&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.drdobbs.com/parallel/writing-lock-free-code-a-corrected-queue/210604448&quot; target=&quot;_blank&quot;&gt;Writing Lock-Free Code: A Corrected Queue&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/ABA_problem&quot; target=&quot;_blank&quot;&gt;ç»´åŸºç™¾ç§‘: ABA problem&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.92.8221&amp;amp;rep=rep1&amp;amp;type=pdf&quot; target=&quot;_blank&quot;&gt;Lock-Free Reference Counting&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://www.cse.chalmers.se/~tsigas/papers/MemoryReclamation-ReferenceCounting-ISPAN05.pdf&quot; target=&quot;_blank&quot;&gt;Efficient and Reliable Lock-Free Memory Reclamation Based on Reference Counting&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://en.wikipedia.org/wiki/Hazard_pointer&quot; target=&quot;_blank&quot;&gt;ç»´åŸºç™¾ç§‘: Hazard pointer&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://en.cppreference.com/w/cpp/atomic/memory_order&quot; target=&quot;_blank&quot;&gt;C++11 Memory Order&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://blog.regehr.org/archives/28&quot; target=&quot;_blank&quot;&gt;Nine ways to break your systems code using volatile&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;br /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;/2017/01/cpp11_atomic_and_lockfree_program/&quot;&gt;åŸå§‹é“¾æ¥&lt;/a&gt; ç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | &lt;a href=&quot;http://creativecommons.org/licenses/by-nc-nd/4.0/deed.zh&quot;&gt;Creative Commons BY-NC-ND 4.0&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
</description>
        <pubDate>Tue, 10 Jan 2017 00:00:00 +0800</pubDate>
        <link>http://localhost:4000/2017/01/cpp11_atomic_and_lockfree_program/</link>
        <guid isPermaLink="true">http://localhost:4000/2017/01/cpp11_atomic_and_lockfree_program/</guid>
        
        <category>C++</category>
        
        <category>åŸå­æ“ä½œ</category>
        
        <category>è‡ªæ—‹é”</category>
        
        <category>æ— é”ç¼–ç¨‹</category>
        
        
      </item>
    
  </channel>
</rss>
